const _0xb117c2=_0x1a80;(function(_0x309b80,_0x25f24b){const _0x3924db=_0x1a80,_0x56a4cc=_0x309b80();while(!![]){try{const _0x8adc92=parseInt(_0x3924db(0x28d))/0x1*(-parseInt(_0x3924db(0x1ce))/0x2)+parseInt(_0x3924db(0x1d0))/0x3*(parseInt(_0x3924db(0x292))/0x4)+parseInt(_0x3924db(0x1ae))/0x5*(-parseInt(_0x3924db(0x269))/0x6)+-parseInt(_0x3924db(0x1ff))/0x7*(-parseInt(_0x3924db(0x1b8))/0x8)+-parseInt(_0x3924db(0x21c))/0x9*(parseInt(_0x3924db(0x1b6))/0xa)+parseInt(_0x3924db(0x222))/0xb*(-parseInt(_0x3924db(0x196))/0xc)+parseInt(_0x3924db(0x1e3))/0xd*(parseInt(_0x3924db(0x266))/0xe);if(_0x8adc92===_0x25f24b)break;else _0x56a4cc['push'](_0x56a4cc['shift']());}catch(_0x3005bc){_0x56a4cc['push'](_0x56a4cc['shift']());}}}(_0x3c70,0x75ea4));import{initSanPhamView,fetchSanPham,buildSanPhamQuery}from'./sanpham.js';function _0x1a80(_0x444fdc,_0x859565){const _0x3c70c1=_0x3c70();return _0x1a80=function(_0x1a805d,_0x1742aa){_0x1a805d=_0x1a805d-0x18a;let _0x18f1ba=_0x3c70c1[_0x1a805d];return _0x18f1ba;},_0x1a80(_0x444fdc,_0x859565);}import{initDonHangView,fetchDonHang,buildDonHangQuery,openDonHangModal}from'./donhang.js';import{initChiTietView,fetchChiTiet,buildChiTietQuery}from'./chitiet.js';import{initCaiDatView,fetchUsers}from'./caidat.js';const {createClient}=supabase,SUPABASE_URL=_0xb117c2(0x1fb),SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFucXRra256cWV3ZXN4am91ZGhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTE0NzAsImV4cCI6MjA3NzMyNzQ3MH0.3FnZe-lvrI9N2rwZT7Knd5Ab_Rxi5xJ5KeIMMgKD8zQ';export const sb=createClient(SUPABASE_URL,SUPABASE_KEY);export let currentUser=null;export let currentView='view-san-pham';export const viewStates={'view-san-pham':{'currentPage':0x1,'itemsPerPage':0x32,'filters':{'ma_sp':[],'ten_sp':[],'phu_trach':[],'ton_kho':''},'searchTerm':'','selected':new Set()},'view-don-hang':{'currentPage':0x1,'itemsPerPage':0x32,'filters':{'thoi_gian_from':'','thoi_gian_to':'','ma_nx':[],'loai_don':'','yeu_cau':[]},'searchTerm':'','selected':new Set()},'view-chi-tiet':{'currentPage':0x1,'itemsPerPage':0x32,'filters':{'thoi_gian_from':'','thoi_gian_to':'','ma_nx':[],'loai_don':'','ma_sp':[],'ten_sp':[],'phu_trach':[]},'searchTerm':''}};export const cache={'phuTrachList':[],'sanPhamList':[],'fullSanPhamDataForFilters':[],'fullDonHangDataForFilters':[],'fullChiTietDataForFilters':[],'userList':[]};export let activeFilterPopover=null;function _0x3c70(){const _0x2cc6e9=['style','https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/fonts/Roboto/Roboto-Regular.ttf','modal-container','childList','ton_cuoi','.app-view.active','location','>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-sm\x20text-gray-700\x22>','textContent','\x22\x20class=\x22flex\x20items-center\x20space-x-2\x20cursor-pointer\x20p-1\x20rounded\x20hover:bg-gray-100\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22','\x20đã\x20bị\x20xóa.','main-content-area','sidebar','sanPhamList','v_san_pham_chi_tiet','Tồn\x20Đầu','Phụ\x20Trách','user-gmail','filterKey','Hiển\x20thị\x20toàn\x20bộ\x20','view-cai-dat','User','remove','\x20--\x20<span\x20class=\x22ml-1\x20font-bold\x22>','.announcement-text','phu_trach','Lỗi\x20xuất\x20PDF:','ceil','writeFile','book_new','fullSanPhamDataForFilters','Error\x20loading\x20HTML\x20from\x20','46HQMKAA','progress-bar','hide','filters','view-chi-tiet','716aCUrBs','password-reset-modal','fullDonHangDataForFilters','assign','jspdf','(Ký,\x20ghi\x20rõ\x20họ\x20tên)','Số\x20Lượng','getHeight','channel','INSERT','sp-btn-excel','contains','href','w-64','ton_dau','padStart','getMonth','9507936mjdPyu','keydown','DELETE','getElementById','san_pham','.nav-button','sidebar-toggle-btn','opacity-0','Lỗi\x20xuất\x20Excel:','so_luong','text','Escape','user-ho-ten','src','Người\x20Phụ\x20Trách','ho_ten','\x22\x20class=\x22form-checkbox\x20h-4\x20w-4\x20text-blue-600\x22\x20','image-viewer-modal','toast-container','ma_nx,\x20ma_sp,\x20ten_sp,\x20phu_trach','innerHTML','SUBSCRIBED','view-','utils','1422635XRKKYV','Không\x20có\x20dữ\x20liệu','setFont','removeChannel','Không\x20tìm\x20thấy\x20state\x20cho\x20view:\x20','ten_sp','yeu_cau','modals.html','20cVTXje','-next-page','16ZsHUnK','export-modal','Dữ\x20liệu\x20kho\x20vừa\x20được\x20cập\x20nhật.','target','setFontSize','user-announcement-bar','sidebar-toggle-icon-close','confirm-modal','toggle','don_hang','Xin\x20Chào\x20:\x20','Lỗi\x20session:','view-san-pham','view','select','ma_sp,\x20ten_sp,\x20ton_cuoi,\x20phu_trach','phan_quyen','chi_tiet','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22','length','sidebarCollapsed','Mã\x20NX','23356gjfhgI','toLowerCase','13029ieQHhO','--\x20','Đã\x20kết\x20nối\x20Realtime\x20thành\x20công!','xuat','ct-btn-excel','addFileToVFS','onclick','internal','getDate','Sản\x20phẩm\x20mới:\x20','pageSize','data','Could\x20not\x20load\x20view:\x20','info','.nav-text','w-20','user','save','Xuất\x20Excel\x20thành\x20công!','31681PmtkRY','Roboto-Regular.ttf','filter-popover-template','ma_nx','Thủ\x20Kho','Sản\x20phẩm\x20','.filter-apply-btn','Báo\x20Cáo\x20Tồn\x20Kho\x20Sản\x20Phẩm','value','replace','isArray','itemsPerPage','Roboto','onerror','insertAdjacentHTML','\x20mục','getNumberOfPages','nhap','30%','sp-btn-pdf','Tên\x20SP','postgres_changes','data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IiNlMGU3ZmYiIHN0cm9rZT0iI2QxZDVlNyIgc3Ryb2tlLXdpZHRoPSIxIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgc3Ryb2tlPSJub25lIj48L2NpcmNsZT48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSI0IiBmaWxsPSIjZmZmIj48L2NpcmNsZT48cGF0aCBkPSJNNCAyMGE4IDggMCAwIDEgMTYgMFoiIGZpbGw9IiNmZmYiPjwvcGF0aD48L3N2Zz4=','querySelectorAll','https://qnqtkknzqewesxjoudhr.supabase.co','forEach','aoa_to_sheet','hidden','1056923snDyia','CHANNEL_ERROR','Data','createElement','dataset','.filter-options-list','thoi_gian','ma_nx,\x20thoi_gian,\x20loai,\x20ma_sp,\x20ten_sp,\x20so_luong,\x20muc_dich,\x20phu_trach','sidebar-avatar','ml-64','querySelector','Xuất\x20PDF\x20thành\x20công!','active','.\x20Bạn\x20chỉ\x20có\x20thể\x20<span\x20class=\x22font-bold\x20text-red-600\x20uppercase\x22>XEM</span>\x20các\x20đơn\x20hàng\x20và\x20sản\x20phẩm\x20của\x20mình.','getWidth','normal','confirm-title','order','ml-20','transitionend','Không\x20thể\x20tải\x20file\x20font.','from','parentElement','Tồn\x20Cuối','mr-3','split','Mục\x20Đích','addEventListener','Xuất\x20Excel\x20thất\x20bại.','3206799TKVEvz','Nhập','true','join','click','classList','11mfvhhh','landscape','blob','searchTerm','sort','anh_dai_dien_url','100%','className','key','error','main-app','div','loggedInUser','button','getItem','loading-overlay','result','all','view-container','DOMContentLoaded','readAsDataURL','width','ma_sp','Mã\x20SP','add','show','public','message','.filter-search-input','filtered','ma_nx,\x20yeu_cau','cancel-reset-btn','</span>','loai','export-filtered-btn','parse','confirm-ok-btn','confirm-cancel-btn','appendChild','fullChiTietDataForFilters','cursor','subscribe','addFont','logout-btn','log','user-details','clear','input:checked','Realtime\x20update\x20received:','cloneNode','Hiển\x20thị\x20','toast\x20toast-','Bảng\x20sản\x20phẩm\x20vừa\x20được\x20cập\x20nhật.','view-don-hang','ma_sp,\x20ten_sp,\x20ton_dau,\x20nhap,\x20xuat,\x20ton_cuoi,\x20phu_trach','public-db-changes','eventType','DanhSachSanPham.xlsx','getFullYear','Thời\x20Gian','filter-opt-','Không\x20thể\x20tải\x20dữ\x20liệu\x20cần\x20thiết\x20cho\x20ứng\x20dụng.','filter','disabled','old','export-all-btn','login.html','Admin','9940XSHWZi','sidebar-toggle-icon-open','includes','6ZnMSik','map','Danh\x20sách\x20đơn\x20hàng\x20vừa\x20được\x20cập\x20nhật.','closest'];_0x3c70=function(){return _0x2cc6e9;};return _0x3c70();}let realtimeChannel=null;const initializedViews=new Set();export const PLACEHOLDER_IMAGE_URL='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IiNmMGYwZjAiIHN0cm9rZT0iI2NjY2NjYyIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgcng9IjIiIHJ5PSIyIj48L3JlY3Q+PGNpcmNsZSBjeD0iOC41IiBjeT0iOC41IiByPSIxLjUiPjwvY2lyY2xlPjxwb2x5bGluZSBwb2ludHM9IjIxIDE1IDE2IDEwIDUgMTciPjwvcG9seWxpbmU+PC9zdmc+';export const DEFAULT_AVATAR_URL=_0xb117c2(0x1f9);export const showLoading=_0x4bae7b=>document[_0xb117c2(0x199)](_0xb117c2(0x231))[_0xb117c2(0x221)][_0xb117c2(0x1c0)]('hidden',!_0x4bae7b);export const formatDate=_0x34ad37=>{const _0x5385b1=_0xb117c2;if(!_0x34ad37)return'';const _0x50fb1b=new Date(_0x34ad37),_0x29307d=String(_0x50fb1b[_0x5385b1(0x1d8)]())[_0x5385b1(0x194)](0x2,'0'),_0x3d6682=String(_0x50fb1b[_0x5385b1(0x195)]()+0x1)[_0x5385b1(0x194)](0x2,'0'),_0x2b6ad4=_0x50fb1b[_0x5385b1(0x25c)]();return _0x29307d+'/'+_0x3d6682+'/'+_0x2b6ad4;};export const debounce=(_0x4908b9,_0x490856)=>{let _0x59356a;return(..._0x43c526)=>{clearTimeout(_0x59356a),_0x59356a=setTimeout(()=>_0x4908b9['apply'](this,_0x43c526),_0x490856);};};export function showToast(_0x1e6506,_0x4a472b=_0xb117c2(0x1dd)){const _0x4e0841=_0xb117c2,_0x640b89=document['getElementById'](_0x4e0841(0x1a8)),_0x10b233=document[_0x4e0841(0x202)](_0x4e0841(0x22d));_0x10b233[_0x4e0841(0x229)]=_0x4e0841(0x255)+_0x4a472b,_0x10b233[_0x4e0841(0x275)]=_0x1e6506,_0x640b89[_0x4e0841(0x248)](_0x10b233),setTimeout(()=>_0x10b233[_0x4e0841(0x221)][_0x4e0841(0x23a)]('show'),0x64),setTimeout(()=>{const _0x540d60=_0x4e0841;_0x10b233[_0x540d60(0x221)]['remove'](_0x540d60(0x23b)),_0x10b233[_0x540d60(0x221)][_0x540d60(0x23a)](_0x540d60(0x28f)),_0x10b233[_0x540d60(0x21a)](_0x540d60(0x212),()=>_0x10b233[_0x540d60(0x283)]());},0xbb8);}export function showConfirm(_0x39fe4a,_0x17913b='Xác\x20nhận\x20hành\x20động'){return new Promise(_0x4ea70d=>{const _0x5ba281=_0x1a80,_0x495a42=document[_0x5ba281(0x199)](_0x5ba281(0x1bf)),_0x3e0d40=document[_0x5ba281(0x199)](_0x5ba281(0x20f)),_0x3a80de=document['getElementById']('confirm-message'),_0x1c7cb8=document[_0x5ba281(0x199)](_0x5ba281(0x246)),_0x30fb56=document['getElementById'](_0x5ba281(0x247));_0x3e0d40[_0x5ba281(0x275)]=_0x17913b,_0x3a80de[_0x5ba281(0x275)]=_0x39fe4a;const _0x1963c4=_0x39c701=>{const _0x4587dd=_0x5ba281;_0x495a42[_0x4587dd(0x221)]['add'](_0x4587dd(0x1fe)),_0x1c7cb8[_0x4587dd(0x1d6)]=null,_0x30fb56['onclick']=null,_0x4ea70d(_0x39c701);};_0x1c7cb8[_0x5ba281(0x1d6)]=()=>_0x1963c4(!![]),_0x30fb56[_0x5ba281(0x1d6)]=()=>_0x1963c4(![]),_0x495a42['classList']['remove']('hidden');});}function getExportChoice(){return new Promise(_0x5281c9=>{const _0x99625e=_0x1a80,_0x13263d=document['getElementById'](_0x99625e(0x1b9)),_0x130eba=document['getElementById'](_0x99625e(0x244)),_0x566754=document[_0x99625e(0x199)](_0x99625e(0x263)),_0xe939b9=document['getElementById']('export-cancel-btn'),_0x275243=_0x29f97f=>{const _0x45ce85=_0x99625e;_0x13263d[_0x45ce85(0x221)][_0x45ce85(0x23a)]('hidden'),_0x130eba[_0x45ce85(0x1d6)]=null,_0x566754[_0x45ce85(0x1d6)]=null,_0xe939b9['onclick']=null,_0x5281c9(_0x29f97f);};_0x130eba['onclick']=()=>_0x275243(_0x99625e(0x23f)),_0x566754['onclick']=()=>_0x275243('all'),_0xe939b9[_0x99625e(0x1d6)]=()=>_0x275243(null),_0x13263d[_0x99625e(0x221)][_0x99625e(0x283)]('hidden');});}export function closeActiveFilterPopover(){activeFilterPopover&&(activeFilterPopover['remove'](),activeFilterPopover=null);}export function openFilterPopover(_0xae14b4,_0x28cd05){const _0x5aab42=_0xb117c2;closeActiveFilterPopover();const _0x4d5f16=_0xae14b4[_0x5aab42(0x203)][_0x5aab42(0x27f)],_0x506760=viewStates[_0x28cd05];if(!_0x506760){console[_0x5aab42(0x22b)](_0x5aab42(0x1b2)+_0x28cd05);return;}let _0x33a118;if(_0x28cd05===_0x5aab42(0x1c4))_0x33a118=cache[_0x5aab42(0x28b)];else{if(_0x28cd05==='view-don-hang')_0x33a118=cache[_0x5aab42(0x294)];else _0x33a118=cache['fullChiTietDataForFilters'];}if(!Array[_0x5aab42(0x1ed)](_0x33a118)){console[_0x5aab42(0x22b)]('Dữ\x20liệu\x20bộ\x20lọc\x20không\x20hợp\x20lệ:',_0x33a118);return;}const _0x3e2e17=new Set(_0x506760[_0x5aab42(0x290)][_0x4d5f16]);let _0x2aaa05=[..._0x33a118];for(const _0x4866cb in _0x506760[_0x5aab42(0x290)]){_0x4866cb!==_0x4d5f16&&_0x506760[_0x5aab42(0x290)][_0x4866cb]&&Array[_0x5aab42(0x1ed)](_0x506760[_0x5aab42(0x290)][_0x4866cb])&&_0x506760['filters'][_0x4866cb][_0x5aab42(0x1cb)]>0x0&&(_0x2aaa05=_0x2aaa05[_0x5aab42(0x260)](_0x5d0fc4=>_0x506760[_0x5aab42(0x290)][_0x4866cb]['includes'](_0x5d0fc4[_0x4866cb])));}const _0x24f205=[...new Set(_0x2aaa05[_0x5aab42(0x26a)](_0xa74fcd=>_0xa74fcd[_0x4d5f16])[_0x5aab42(0x260)](Boolean))][_0x5aab42(0x226)](),_0x28746f=document[_0x5aab42(0x199)](_0x5aab42(0x1e5));activeFilterPopover=_0x28746f[_0x5aab42(0x253)](!![]),activeFilterPopover['id']='',activeFilterPopover['classList'][_0x5aab42(0x283)](_0x5aab42(0x1fe));const _0xdf0371=activeFilterPopover[_0x5aab42(0x209)](_0x5aab42(0x23e)),_0x204f15=activeFilterPopover['querySelector'](_0x5aab42(0x204)),_0x167757=activeFilterPopover['querySelector'](_0x5aab42(0x1e9));function _0x23185e(_0x334190=''){const _0x23a080=_0x5aab42;_0x204f15[_0x23a080(0x1aa)]='',_0x24f205[_0x23a080(0x260)](_0x1cc401=>_0x1cc401[_0x23a080(0x1cf)]()[_0x23a080(0x268)](_0x334190[_0x23a080(0x1cf)]()))[_0x23a080(0x1fc)](_0x249b7e=>{const _0x4ba002=_0x23a080,_0x3dff20=_0x4ba002(0x25e)+_0x4d5f16+'-'+_0x249b7e['replace'](/\s/g,'-'),_0xf4888d=_0x3e2e17['has'](_0x249b7e);_0x204f15[_0x4ba002(0x1f1)]('beforeend',_0x4ba002(0x1ca)+_0x3dff20+_0x4ba002(0x276)+_0x3dff20+'\x22\x20data-value=\x22'+_0x249b7e+_0x4ba002(0x1a6)+(_0xf4888d?'checked':'')+_0x4ba002(0x274)+_0x249b7e+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20');});}_0x23185e(),_0xae14b4[_0x5aab42(0x215)][_0x5aab42(0x248)](activeFilterPopover),_0xdf0371[_0x5aab42(0x21a)]('input',()=>_0x23185e(_0xdf0371[_0x5aab42(0x1eb)])),_0x167757['addEventListener'](_0x5aab42(0x220),()=>{const _0xfeac86=_0x5aab42,_0xd8d99f=Array['from'](_0x204f15[_0xfeac86(0x1fa)](_0xfeac86(0x251)))[_0xfeac86(0x26a)](_0x558f18=>_0x558f18[_0xfeac86(0x203)][_0xfeac86(0x1eb)]);_0x506760[_0xfeac86(0x290)][_0x4d5f16]=_0xd8d99f;const _0x3981fa=_0xae14b4[_0xfeac86(0x275)]['split']('--')[0x1]['trim']()[_0xfeac86(0x218)]('\x20')[0x0],_0x1a7354=_0xd8d99f[_0xfeac86(0x1cb)]>0x0?'('+_0xd8d99f[_0xfeac86(0x1cb)]+')':'';_0xae14b4['innerHTML']=_0xfeac86(0x1d1)+_0x3981fa+_0xfeac86(0x284)+_0x1a7354+_0xfeac86(0x242),closeActiveFilterPopover();if(_0x28cd05===_0xfeac86(0x1c4))fetchSanPham(0x1);else{if(_0x28cd05===_0xfeac86(0x257))fetchDonHang(0x1);else fetchChiTiet(0x1);}});}export function renderPagination(_0x4b078a,_0x181119,_0x28d69c,_0x2af82f){const _0x151948=_0xb117c2,_0x401ef4=viewStates[_0x151948(0x1ac)+_0x4b078a];if(!_0x401ef4)return;const _0x2b0bf0=document[_0x151948(0x199)](_0x4b078a+'-pagination-info'),_0x56f05a=document[_0x151948(0x199)](_0x4b078a+'-prev-page'),_0x14854f=document[_0x151948(0x199)](_0x4b078a+_0x151948(0x1b7));if(!_0x2b0bf0||!_0x56f05a||!_0x14854f)return;const _0xfc5261=_0x401ef4[_0x151948(0x1ee)]===_0x151948(0x233);if(_0x181119>0x0&&!_0xfc5261)_0x2b0bf0['textContent']=_0x151948(0x254)+(_0x28d69c+0x1)+'\x20-\x20'+(_0x2af82f+0x1)+'\x20trên\x20tổng\x20số\x20'+_0x181119+_0x151948(0x1f2);else _0x181119>0x0&&_0xfc5261?_0x2b0bf0['textContent']=_0x151948(0x280)+_0x181119+_0x151948(0x1f2):_0x2b0bf0[_0x151948(0x275)]=_0x151948(0x1af);_0x56f05a[_0x151948(0x261)]=_0x401ef4['currentPage']<=0x1||_0xfc5261;const _0x2b3711=_0xfc5261?0x1:Math[_0x151948(0x288)](_0x181119/parseInt(_0x401ef4[_0x151948(0x1ee)]));_0x14854f[_0x151948(0x261)]=_0x401ef4['currentPage']>=_0x2b3711||_0xfc5261;}async function exportToExcel(_0x3afbf7){const _0x1411e3=_0xb117c2,_0x56349b=await getExportChoice();if(!_0x56349b)return;showLoading(!![]);try{const _0x107873=_0x56349b===_0x1411e3(0x23f);let _0x42b165,_0x34e208,_0x14d17d,_0x481853,_0x5755f0;_0x3afbf7==='sp'?(_0x42b165=buildSanPhamQuery,_0x5755f0='ma_sp,\x20ten_sp,\x20ton_dau,\x20nhap,\x20xuat,\x20ton_cuoi,\x20phu_trach',_0x34e208=[_0x1411e3(0x239),'Tên\x20SP',_0x1411e3(0x27c),_0x1411e3(0x21d),'Xuất',_0x1411e3(0x216),_0x1411e3(0x27d)],_0x14d17d=[_0x1411e3(0x238),_0x1411e3(0x1b3),'ton_dau','nhap','xuat',_0x1411e3(0x271),_0x1411e3(0x286)],_0x481853=_0x1411e3(0x25b)):(_0x42b165=buildChiTietQuery,_0x5755f0=_0x1411e3(0x206),_0x34e208=[_0x1411e3(0x1cd),_0x1411e3(0x25d),'Loại',_0x1411e3(0x239),'Tên\x20SP',_0x1411e3(0x18b),_0x1411e3(0x219),_0x1411e3(0x27d)],_0x14d17d=[_0x1411e3(0x1e6),_0x1411e3(0x205),_0x1411e3(0x243),'ma_sp','ten_sp',_0x1411e3(0x19f),'muc_dich','phu_trach'],_0x481853='ChiTietNhapXuat.xlsx');let _0x5a2e7e=_0x107873?_0x42b165(_0x5755f0):sb[_0x1411e3(0x214)](_0x3afbf7==='sp'?_0x1411e3(0x27b):_0x1411e3(0x1c9))['select'](_0x5755f0);currentUser&&currentUser[_0x1411e3(0x1c8)]===_0x1411e3(0x282)&&!_0x107873&&(_0x5a2e7e=_0x5a2e7e['eq'](_0x1411e3(0x286),currentUser[_0x1411e3(0x1a5)]));const {data:_0x567852,error:_0x4dd416}=await _0x5a2e7e[_0x1411e3(0x210)](_0x3afbf7==='sp'?_0x1411e3(0x238):_0x1411e3(0x205),{'ascending':_0x3afbf7==='sp'});if(_0x4dd416)throw _0x4dd416;const _0x5cdb54=_0x567852['map'](_0x4f0003=>{const _0x5226af=_0x1411e3;return _0x14d17d[_0x5226af(0x26a)](_0x33445e=>{if(_0x33445e==='thoi_gian')return formatDate(_0x4f0003[_0x33445e]);return _0x4f0003[_0x33445e]!==null&&_0x4f0003[_0x33445e]!==undefined?_0x4f0003[_0x33445e]:'';});}),_0x5a1c2a=XLSX['utils'][_0x1411e3(0x1fd)]([_0x34e208,..._0x5cdb54]),_0x11672c=XLSX[_0x1411e3(0x1ad)][_0x1411e3(0x28a)]();XLSX[_0x1411e3(0x1ad)]['book_append_sheet'](_0x11672c,_0x5a1c2a,_0x1411e3(0x201)),XLSX[_0x1411e3(0x289)](_0x11672c,_0x481853),showToast(_0x1411e3(0x1e2),'success');}catch(_0x36be08){console[_0x1411e3(0x22b)](_0x1411e3(0x19e),_0x36be08),showToast(_0x1411e3(0x21b),_0x1411e3(0x22b));}finally{showLoading(![]);}}async function exportToPdf(_0x56ad9e){const _0x33cf6f=_0xb117c2,_0x249476=await getExportChoice();if(!_0x249476)return;showLoading(!![]);try{const {jsPDF:_0x14c05f}=window[_0x33cf6f(0x296)],_0x1ed253=new _0x14c05f({'orientation':_0x33cf6f(0x223)}),_0x14207f=_0x33cf6f(0x26e),_0x2463b=await fetch(_0x14207f);if(!_0x2463b['ok'])throw new Error(_0x33cf6f(0x213));const _0x33f75a=await _0x2463b[_0x33cf6f(0x224)](),_0x45ab21=await new Promise((_0x2c0238,_0x51a1c)=>{const _0x5ef08f=_0x33cf6f,_0xa95f28=new FileReader();_0xa95f28[_0x5ef08f(0x236)](_0x33f75a),_0xa95f28['onload']=()=>_0x2c0238(_0xa95f28[_0x5ef08f(0x232)][_0x5ef08f(0x218)](',')[0x1]),_0xa95f28[_0x5ef08f(0x1f0)]=_0x328087=>_0x51a1c(_0x328087);});_0x1ed253[_0x33cf6f(0x1d5)](_0x33cf6f(0x1e4),_0x45ab21),_0x1ed253[_0x33cf6f(0x24c)](_0x33cf6f(0x1e4),_0x33cf6f(0x1ef),_0x33cf6f(0x20e)),_0x1ed253[_0x33cf6f(0x1b0)](_0x33cf6f(0x1ef));const _0x3dd66c=_0x249476===_0x33cf6f(0x23f);let _0x1faf5d,_0x3ff3d1,_0x493728,_0x2fb907,_0x10ab3b,_0x5d3552;_0x56ad9e==='sp'?(_0x1faf5d=buildSanPhamQuery,_0x3ff3d1=_0x33cf6f(0x258),_0x493728=[[_0x33cf6f(0x239),'Tên\x20SP',_0x33cf6f(0x27c),_0x33cf6f(0x21d),'Xuất',_0x33cf6f(0x216),_0x33cf6f(0x27d)]],_0x2fb907=['ma_sp',_0x33cf6f(0x1b3),_0x33cf6f(0x193),_0x33cf6f(0x1f4),_0x33cf6f(0x1d3),_0x33cf6f(0x271),'phu_trach'],_0x10ab3b=_0x33cf6f(0x1ea),_0x5d3552={0x0:{'cellWidth':0x23},0x1:{'cellWidth':0x41},0x2:{'cellWidth':0x19},0x3:{'cellWidth':0x19},0x4:{'cellWidth':0x19},0x5:{'cellWidth':0x19},0x6:{'cellWidth':'auto'}}):(_0x1faf5d=buildChiTietQuery,_0x3ff3d1=_0x33cf6f(0x206),_0x493728=[[_0x33cf6f(0x1cd),_0x33cf6f(0x25d),'Loại',_0x33cf6f(0x239),_0x33cf6f(0x1f7),'SL',_0x33cf6f(0x219),'Phụ\x20Trách']],_0x2fb907=[_0x33cf6f(0x1e6),'thoi_gian',_0x33cf6f(0x243),_0x33cf6f(0x238),_0x33cf6f(0x1b3),'so_luong','muc_dich',_0x33cf6f(0x286)],_0x10ab3b='Báo\x20Cáo\x20Chi\x20Tiết\x20Nhập\x20Xuất',_0x5d3552={0x0:{'cellWidth':0x19},0x1:{'cellWidth':0x19},0x2:{'cellWidth':0xf},0x3:{'cellWidth':0x1e},0x4:{'cellWidth':0x2d},0x5:{'cellWidth':0xf},0x6:{'cellWidth':0x46},0x7:{'cellWidth':'auto'}});let _0x32d805=_0x3dd66c?_0x1faf5d(_0x3ff3d1):sb['from'](_0x56ad9e==='sp'?'v_san_pham_chi_tiet':'chi_tiet')[_0x33cf6f(0x1c6)](_0x3ff3d1);currentUser&&currentUser[_0x33cf6f(0x1c8)]==='User'&&!_0x3dd66c&&(_0x32d805=_0x32d805['eq'](_0x33cf6f(0x286),currentUser[_0x33cf6f(0x1a5)]));const {data:_0x1e2a73,error:_0x3c5b93}=await _0x32d805[_0x33cf6f(0x210)](_0x56ad9e==='sp'?'ma_sp':'thoi_gian',{'ascending':_0x56ad9e==='sp'});if(_0x3c5b93)throw _0x3c5b93;const _0x7792dc=_0x1e2a73[_0x33cf6f(0x26a)](_0x111b66=>_0x2fb907[_0x33cf6f(0x26a)](_0x123d44=>{const _0x508e8f=_0x33cf6f;if(_0x123d44===_0x508e8f(0x205))return formatDate(_0x111b66[_0x123d44]);return _0x111b66[_0x123d44]!==null&&_0x111b66[_0x123d44]!==undefined?String(_0x111b66[_0x123d44]):'';}));_0x1ed253[_0x33cf6f(0x1b0)](_0x33cf6f(0x1ef),_0x33cf6f(0x20e)),_0x1ed253['setFontSize'](0x12),_0x1ed253[_0x33cf6f(0x1a0)](_0x10ab3b,0xe,0x10),_0x1ed253['autoTable']({'head':_0x493728,'body':_0x7792dc,'startY':0x16,'styles':{'font':_0x33cf6f(0x1ef),'fontStyle':_0x33cf6f(0x20e),'fontSize':0x7},'headStyles':{'fillColor':[0x22,0x77,0xaa],'textColor':0xff,'fontStyle':'bold'},'columnStyles':_0x5d3552,'didDrawPage':function(_0x58fdcf){const _0x1f2a81=_0x33cf6f;if(_0x58fdcf['pageNumber']===_0x1ed253[_0x1f2a81(0x1d7)][_0x1f2a81(0x1f3)]()){const _0x11bbe4=_0x1ed253['internal'][_0x1f2a81(0x1da)][_0x1f2a81(0x18c)](),_0x1acd22=_0x1ed253[_0x1f2a81(0x1d7)][_0x1f2a81(0x1da)][_0x1f2a81(0x20d)]();let _0xdedd6d=_0x58fdcf[_0x1f2a81(0x24a)]['y']+0xf;if(_0xdedd6d>_0x11bbe4-0x14)_0xdedd6d=_0x11bbe4-0x14;_0x1ed253[_0x1f2a81(0x1bc)](0xb),_0x1ed253[_0x1f2a81(0x1b0)](_0x1f2a81(0x1ef),_0x1f2a81(0x20e)),_0x1ed253[_0x1f2a81(0x1a0)](_0x1f2a81(0x1a4),0x28,_0xdedd6d),_0x1ed253[_0x1f2a81(0x1a0)](_0x1f2a81(0x18a),0x28,_0xdedd6d+0x7),_0x1ed253['text'](_0x1f2a81(0x1e7),_0x1acd22-0x50,_0xdedd6d),_0x1ed253[_0x1f2a81(0x1a0)]('(Ký,\x20ghi\x20rõ\x20họ\x20tên)',_0x1acd22-0x50,_0xdedd6d+0x7);}}}),_0x1ed253[_0x33cf6f(0x1e1)](_0x10ab3b[_0x33cf6f(0x1ec)](/\s/g,'_')+'.pdf'),showToast(_0x33cf6f(0x20a),'success');}catch(_0x27af24){console[_0x33cf6f(0x22b)](_0x33cf6f(0x287),_0x27af24),showToast('Xuất\x20PDF\x20thất\x20bại.\x20Đã\x20có\x20lỗi\x20xảy\x20ra.',_0x33cf6f(0x22b));}finally{showLoading(![]);}}async function showView(_0x347df1){const _0x30e9f1=_0xb117c2;if(currentView===_0x347df1)return;const _0x1c5002=document['getElementById'](_0x30e9f1(0x28e)),_0x2ffd8c=_0x1c5002[_0x30e9f1(0x209)]('.progress-bar-inner');_0x1c5002[_0x30e9f1(0x221)][_0x30e9f1(0x283)]('hidden'),_0x2ffd8c[_0x30e9f1(0x26d)][_0x30e9f1(0x237)]='0%';try{setTimeout(()=>{const _0x37f699=_0x30e9f1;_0x2ffd8c[_0x37f699(0x26d)]['width']=_0x37f699(0x1f5);},0x0);const _0x33b6f2=document[_0x30e9f1(0x209)](_0x30e9f1(0x272));document[_0x30e9f1(0x1fa)]('.nav-button')['forEach'](_0x2a99f3=>{const _0x3427b1=_0x30e9f1;_0x2a99f3['classList'][_0x3427b1(0x1c0)]('active',_0x2a99f3[_0x3427b1(0x203)]['view']===_0x347df1);});const _0x21e180=document[_0x30e9f1(0x199)](_0x30e9f1(0x234)),_0x1eda9b=_0x347df1['replace']('view-',''),_0x33fdab=_0x1eda9b+'.html';let _0x32249c=document[_0x30e9f1(0x199)](_0x347df1);if(!_0x32249c){const _0x16b3c8=await fetch(_0x33fdab);if(!_0x16b3c8['ok'])throw new Error('Could\x20not\x20load\x20'+_0x33fdab);const _0x24b04a=await _0x16b3c8[_0x30e9f1(0x1a0)]();_0x21e180[_0x30e9f1(0x1f1)]('beforeend',_0x24b04a),_0x32249c=document[_0x30e9f1(0x199)](_0x347df1);}_0x2ffd8c['style'][_0x30e9f1(0x237)]='70%';if(!initializedViews['has'](_0x347df1)){switch(_0x347df1){case'view-san-pham':initSanPhamView();break;case'view-don-hang':initDonHangView();break;case _0x30e9f1(0x291):initChiTietView();break;case _0x30e9f1(0x281):initCaiDatView();break;}initializedViews[_0x30e9f1(0x23a)](_0x347df1);}currentView=_0x347df1,await loadDataForCurrentView(![]),_0x33b6f2&&_0x33b6f2[_0x30e9f1(0x221)][_0x30e9f1(0x283)](_0x30e9f1(0x20b)),_0x32249c['classList'][_0x30e9f1(0x23a)]('active'),_0x2ffd8c[_0x30e9f1(0x26d)][_0x30e9f1(0x237)]=_0x30e9f1(0x228),setTimeout(()=>{const _0x539a9f=_0x30e9f1;_0x1c5002[_0x539a9f(0x221)][_0x539a9f(0x23a)](_0x539a9f(0x1fe)),_0x2ffd8c[_0x539a9f(0x26d)][_0x539a9f(0x237)]='0%';},0x1f4);}catch(_0x4c1700){console[_0x30e9f1(0x22b)]('Error\x20loading\x20view\x20'+_0x347df1+':',_0x4c1700),showToast(_0x30e9f1(0x1dc)+_0x347df1,'error'),_0x1c5002[_0x30e9f1(0x221)][_0x30e9f1(0x23a)]('hidden');}}export function navigateToSanPham(_0x31a698){const _0x4ef666=_0xb117c2,_0x4c136d=viewStates[_0x4ef666(0x1c4)];_0x4c136d[_0x4ef666(0x225)]='',_0x4c136d[_0x4ef666(0x290)]={'ma_sp':[],'ten_sp':[],'phu_trach':[],'ton_kho':''},Object[_0x4ef666(0x295)](_0x4c136d[_0x4ef666(0x290)],_0x31a698),showView(_0x4ef666(0x1c4));}async function loadDataForCurrentView(_0x1afb5a=!![]){const _0x24ac33=_0xb117c2;switch(currentView){case'view-san-pham':await fetchSanPham(0x1,_0x1afb5a);break;case _0x24ac33(0x257):await fetchDonHang(0x1,_0x1afb5a);break;case _0x24ac33(0x291):await fetchChiTiet(0x1,_0x1afb5a);break;case _0x24ac33(0x281):await fetchUsers(_0x1afb5a);break;}}export function updateSidebarAvatar(_0x28b83d){const _0x34694b=_0xb117c2,_0x1a59b5=document[_0x34694b(0x199)](_0x34694b(0x207));_0x1a59b5&&(_0x1a59b5[_0x34694b(0x1a3)]=_0x28b83d||DEFAULT_AVATAR_URL);}document['addEventListener'](_0xb117c2(0x235),async()=>{const _0x2c20e9=_0xb117c2,_0x444b49=document[_0x2c20e9(0x199)](_0x2c20e9(0x279)),_0x324473=document[_0x2c20e9(0x199)](_0x2c20e9(0x278)),_0x5e1b0c=document[_0x2c20e9(0x199)](_0x2c20e9(0x19c)),_0x46f003=document[_0x2c20e9(0x199)](_0x2c20e9(0x267)),_0xb4d0e7=document[_0x2c20e9(0x199)](_0x2c20e9(0x1be)),_0x301c5c=document[_0x2c20e9(0x1fa)](_0x2c20e9(0x1de)),_0xa8fefb=document[_0x2c20e9(0x199)](_0x2c20e9(0x24f)),_0x5c4cab=document[_0x2c20e9(0x199)]('sidebar-footer'),_0x2451e9=document[_0x2c20e9(0x199)](_0x2c20e9(0x207)),_0x120815=_0x491921=>{const _0x5b77c2=_0x2c20e9;_0x491921?(_0x444b49['classList']['remove']('w-64'),_0x444b49[_0x5b77c2(0x221)][_0x5b77c2(0x23a)](_0x5b77c2(0x1df)),_0x324473[_0x5b77c2(0x221)]['remove'](_0x5b77c2(0x208)),_0x324473[_0x5b77c2(0x221)]['add'](_0x5b77c2(0x211)),_0x46f003['classList']['remove'](_0x5b77c2(0x1fe)),_0xb4d0e7[_0x5b77c2(0x221)][_0x5b77c2(0x23a)](_0x5b77c2(0x1fe)),_0x301c5c['forEach'](_0x2a6c8d=>_0x2a6c8d['classList']['add'](_0x5b77c2(0x19d),_0x5b77c2(0x1fe))),_0xa8fefb[_0x5b77c2(0x221)][_0x5b77c2(0x23a)](_0x5b77c2(0x19d),'hidden'),_0x5c4cab[_0x5b77c2(0x221)]['add']('opacity-0','hidden'),_0x2451e9[_0x5b77c2(0x221)][_0x5b77c2(0x283)]('mr-3')):(_0x444b49[_0x5b77c2(0x221)][_0x5b77c2(0x23a)](_0x5b77c2(0x192)),_0x444b49[_0x5b77c2(0x221)][_0x5b77c2(0x283)](_0x5b77c2(0x1df)),_0x324473['classList'][_0x5b77c2(0x23a)]('ml-64'),_0x324473[_0x5b77c2(0x221)][_0x5b77c2(0x283)](_0x5b77c2(0x211)),_0x46f003['classList'][_0x5b77c2(0x23a)](_0x5b77c2(0x1fe)),_0xb4d0e7[_0x5b77c2(0x221)][_0x5b77c2(0x283)](_0x5b77c2(0x1fe)),_0x301c5c[_0x5b77c2(0x1fc)](_0x21e5cc=>_0x21e5cc[_0x5b77c2(0x221)][_0x5b77c2(0x283)]('opacity-0',_0x5b77c2(0x1fe))),_0xa8fefb[_0x5b77c2(0x221)]['remove'](_0x5b77c2(0x19d),_0x5b77c2(0x1fe)),_0x5c4cab[_0x5b77c2(0x221)][_0x5b77c2(0x283)]('opacity-0','hidden'),_0x2451e9['classList'][_0x5b77c2(0x23a)](_0x5b77c2(0x217)));};_0x5e1b0c['addEventListener'](_0x2c20e9(0x220),()=>{const _0x454888=_0x2c20e9,_0x2e5b3f=_0x444b49[_0x454888(0x221)][_0x454888(0x190)](_0x454888(0x1df));_0x120815(!_0x2e5b3f),localStorage['setItem'](_0x454888(0x1cc),!_0x2e5b3f);});localStorage[_0x2c20e9(0x230)](_0x2c20e9(0x1cc))===_0x2c20e9(0x21e)&&_0x120815(!![]);async function _0x3cce01(_0x5a898c,_0x358174){const _0x23a52d=_0x2c20e9;try{const _0xfe171f=await fetch(_0x5a898c);if(!_0xfe171f['ok'])throw new Error('Could\x20not\x20load\x20'+_0x5a898c);const _0x1ce044=await _0xfe171f[_0x23a52d(0x1a0)]();document[_0x23a52d(0x199)](_0x358174)[_0x23a52d(0x1aa)]=_0x1ce044;}catch(_0x3ba5f3){console[_0x23a52d(0x22b)](_0x23a52d(0x28c)+_0x5a898c+':',_0x3ba5f3);}}async function _0x2b0818(){const _0x215d46=_0x2c20e9;try{await _0x3cce01(_0x215d46(0x1b5),_0x215d46(0x26f));const _0x3a77a8=sessionStorage[_0x215d46(0x230)](_0x215d46(0x22e));_0x3a77a8?await _0x29a10e(JSON[_0x215d46(0x245)](_0x3a77a8)):window[_0x215d46(0x273)][_0x215d46(0x191)]=_0x215d46(0x264);}catch(_0x295f65){console[_0x215d46(0x22b)](_0x215d46(0x1c3),_0x295f65),sessionStorage[_0x215d46(0x250)](),window['location']['href']='login.html';}}async function _0x29a10e(_0x3bba66){const _0x268e2c=_0x2c20e9;currentUser=_0x3bba66,document[_0x268e2c(0x199)](_0x268e2c(0x1a2))['textContent']=_0x3bba66[_0x268e2c(0x1a5)]||_0x268e2c(0x282),document[_0x268e2c(0x199)](_0x268e2c(0x27e))['textContent']=_0x3bba66['gmail'],updateSidebarAvatar(_0x3bba66[_0x268e2c(0x227)]);const _0x396339=document[_0x268e2c(0x199)](_0x268e2c(0x1bd));if(_0x3bba66['phan_quyen']===_0x268e2c(0x282)){const _0x5872d3=_0x396339['querySelector'](_0x268e2c(0x285));_0x5872d3[_0x268e2c(0x1aa)]=_0x268e2c(0x1c2)+_0x3bba66['ho_ten']+'\x20-\x20'+_0x3bba66['phan_quyen']+_0x268e2c(0x20c),_0x396339[_0x268e2c(0x221)][_0x268e2c(0x283)](_0x268e2c(0x1fe));}else _0x396339[_0x268e2c(0x221)]['add'](_0x268e2c(0x1fe));_0x3702e3(_0x3bba66),await _0x2f1116(),_0x4cc9ec(),document[_0x268e2c(0x199)]('app-loading')[_0x268e2c(0x221)][_0x268e2c(0x23a)](_0x268e2c(0x1fe)),document['getElementById'](_0x268e2c(0x22c))['classList'][_0x268e2c(0x283)](_0x268e2c(0x1fe)),_0x3cc542(),await showView(currentView);}async function _0x2f1116(){const _0x2eb985=_0x2c20e9;showLoading(!![]);try{let _0x1a369d=sb[_0x2eb985(0x214)](_0x2eb985(0x27b))['select']('ma_sp,\x20ten_sp,\x20phu_trach'),_0x5f4eb3=sb[_0x2eb985(0x214)](_0x2eb985(0x1c1))['select'](_0x2eb985(0x240)),_0x17a4f0=sb[_0x2eb985(0x214)](_0x2eb985(0x1c9))['select'](_0x2eb985(0x1a9));currentUser&&currentUser[_0x2eb985(0x1c8)]===_0x2eb985(0x282)&&(_0x1a369d=_0x1a369d['eq'](_0x2eb985(0x286),currentUser[_0x2eb985(0x1a5)]),_0x5f4eb3=_0x5f4eb3['eq'](_0x2eb985(0x1b4),currentUser[_0x2eb985(0x1a5)]),_0x17a4f0=_0x17a4f0['eq'](_0x2eb985(0x286),currentUser[_0x2eb985(0x1a5)]));const _0x554c2a=sb[_0x2eb985(0x214)]('v_san_pham_chi_tiet')[_0x2eb985(0x1c6)](_0x2eb985(0x286)),_0x5edc4e=sb[_0x2eb985(0x214)](_0x2eb985(0x27b))[_0x2eb985(0x1c6)](_0x2eb985(0x1c7)),_0x2c8fea=sb[_0x2eb985(0x214)](_0x2eb985(0x1e0))[_0x2eb985(0x1c6)](_0x2eb985(0x1a5)),[_0x449bcf,_0x18a358,_0x6cd51f,_0x38a241,_0xb39938,_0x29842c]=await Promise[_0x2eb985(0x233)]([_0x554c2a,_0x5edc4e,_0x2c8fea,_0x1a369d,_0x5f4eb3,_0x17a4f0]),_0x2508b5=[_0x449bcf['error'],_0x18a358[_0x2eb985(0x22b)],_0x6cd51f[_0x2eb985(0x22b)],_0x38a241[_0x2eb985(0x22b)],_0xb39938[_0x2eb985(0x22b)],_0x29842c[_0x2eb985(0x22b)]][_0x2eb985(0x260)](Boolean);if(_0x2508b5[_0x2eb985(0x1cb)]>0x0)throw new Error('Lỗi\x20khi\x20tải\x20dữ\x20liệu\x20ban\x20đầu:\x20'+_0x2508b5[_0x2eb985(0x26a)](_0x1f529c=>_0x1f529c[_0x2eb985(0x23d)])[_0x2eb985(0x21f)](',\x20'));const _0x25f8e0=[...new Set((_0x449bcf[_0x2eb985(0x1db)]||[])[_0x2eb985(0x26a)](_0x2f14e8=>_0x2f14e8[_0x2eb985(0x286)])[_0x2eb985(0x260)](Boolean))],_0x57911d=[...new Set((_0x6cd51f[_0x2eb985(0x1db)]||[])[_0x2eb985(0x26a)](_0x3a00e4=>_0x3a00e4[_0x2eb985(0x1a5)])[_0x2eb985(0x260)](Boolean))];cache['phuTrachList']=[...new Set([..._0x25f8e0,..._0x57911d])][_0x2eb985(0x226)](),cache[_0x2eb985(0x27a)]=_0x18a358[_0x2eb985(0x1db)]||[],cache[_0x2eb985(0x28b)]=_0x38a241[_0x2eb985(0x1db)]||[],cache[_0x2eb985(0x294)]=_0xb39938[_0x2eb985(0x1db)]||[],cache[_0x2eb985(0x249)]=_0x29842c[_0x2eb985(0x1db)]||[];}catch(_0x5e0cc4){console['error'](_0x5e0cc4),showToast(_0x2eb985(0x25f),_0x2eb985(0x22b));}finally{showLoading(![]);}}function _0x4cc9ec(){const _0x3c48f0=_0x2c20e9;if(realtimeChannel)sb[_0x3c48f0(0x1b1)](realtimeChannel);const _0x4f3e41=async _0x1be41e=>{const _0x25cdae=_0x3c48f0;console[_0x25cdae(0x24e)](_0x25cdae(0x252),_0x1be41e),showToast(_0x1be41e,_0x25cdae(0x1dd)),await _0x2f1116(),await loadDataForCurrentView();};realtimeChannel=sb[_0x3c48f0(0x18d)](_0x3c48f0(0x259))['on'](_0x3c48f0(0x1f8),{'event':'*','schema':_0x3c48f0(0x23c),'table':_0x3c48f0(0x19a)},_0x1f308e=>{const _0x37753f=_0x3c48f0;let _0xde2239=_0x37753f(0x256);if(_0x1f308e[_0x37753f(0x25a)]===_0x37753f(0x18e))_0xde2239=_0x37753f(0x1d9)+_0x1f308e['new'][_0x37753f(0x238)];if(_0x1f308e[_0x37753f(0x25a)]===_0x37753f(0x198))_0xde2239=_0x37753f(0x1e8)+_0x1f308e[_0x37753f(0x262)][_0x37753f(0x238)]+_0x37753f(0x277);_0x4f3e41(_0xde2239);})['on'](_0x3c48f0(0x1f8),{'event':'*','schema':_0x3c48f0(0x23c),'table':_0x3c48f0(0x1c1)},()=>_0x4f3e41(_0x3c48f0(0x26b)))['on'](_0x3c48f0(0x1f8),{'event':'*','schema':_0x3c48f0(0x23c),'table':_0x3c48f0(0x1c9)},()=>_0x4f3e41(_0x3c48f0(0x1ba)))[_0x3c48f0(0x24b)](_0x242bd7=>{const _0x4ebf17=_0x3c48f0;if(_0x242bd7===_0x4ebf17(0x1ab))console['log'](_0x4ebf17(0x1d2));if(_0x242bd7===_0x4ebf17(0x200))console[_0x4ebf17(0x22b)]('Lỗi\x20kết\x20nối\x20Realtime,\x20đang\x20thử\x20lại...');});}function _0x3702e3(_0x43ec42){const _0x4f0c9a=_0x2c20e9,_0x44314c=_0x43ec42[_0x4f0c9a(0x1c8)]===_0x4f0c9a(0x265),_0xd9894e=new MutationObserver((_0x2da405,_0x4d076b)=>{const _0xee9aaa=_0x4f0c9a;for(const _0x592b1f of _0x2da405){_0x592b1f['type']===_0xee9aaa(0x270)&&document[_0xee9aaa(0x1fa)]('.admin-only')[_0xee9aaa(0x1fc)](_0x57fe1a=>{const _0x5e9ab3=_0xee9aaa;_0x57fe1a['classList'][_0x5e9ab3(0x1c0)](_0x5e9ab3(0x1fe),!_0x44314c);});}});_0xd9894e['observe'](document[_0x4f0c9a(0x199)](_0x4f0c9a(0x234)),{'childList':!![],'subtree':!![]});}function _0x3704c3(){const _0x38d1f8=_0x2c20e9;if(realtimeChannel)sb[_0x38d1f8(0x1b1)](realtimeChannel);sessionStorage[_0x38d1f8(0x250)](),window[_0x38d1f8(0x273)][_0x38d1f8(0x191)]=_0x38d1f8(0x264);}function _0x3cc542(){const _0x3e131a=_0x2c20e9;document[_0x3e131a(0x21a)](_0x3e131a(0x197),_0x11f64a=>{const _0x5ec9a3=_0x3e131a;if(_0x11f64a[_0x5ec9a3(0x22a)]===_0x5ec9a3(0x1a1)){if(activeFilterPopover)closeActiveFilterPopover();else{if(!document[_0x5ec9a3(0x199)](_0x5ec9a3(0x1a7))[_0x5ec9a3(0x221)][_0x5ec9a3(0x190)](_0x5ec9a3(0x1fe)))document['getElementById'](_0x5ec9a3(0x1a7))[_0x5ec9a3(0x221)]['add'](_0x5ec9a3(0x1fe));else{if(!document[_0x5ec9a3(0x199)](_0x5ec9a3(0x1bf))[_0x5ec9a3(0x221)]['contains'](_0x5ec9a3(0x1fe)))document[_0x5ec9a3(0x199)](_0x5ec9a3(0x247))[_0x5ec9a3(0x220)]();else{if(!document[_0x5ec9a3(0x199)](_0x5ec9a3(0x1b9))[_0x5ec9a3(0x221)][_0x5ec9a3(0x190)](_0x5ec9a3(0x1fe)))document['getElementById']('export-cancel-btn')[_0x5ec9a3(0x220)]();else{if(!document['getElementById']('don-hang-modal')[_0x5ec9a3(0x221)][_0x5ec9a3(0x190)]('hidden'))document[_0x5ec9a3(0x199)]('cancel-dh-btn')[_0x5ec9a3(0x220)]();else{if(!document[_0x5ec9a3(0x199)]('san-pham-modal')[_0x5ec9a3(0x221)][_0x5ec9a3(0x190)]('hidden'))document[_0x5ec9a3(0x199)]('cancel-sp-btn')[_0x5ec9a3(0x220)]();else{if(!document[_0x5ec9a3(0x199)](_0x5ec9a3(0x293))[_0x5ec9a3(0x221)][_0x5ec9a3(0x190)](_0x5ec9a3(0x1fe)))document['getElementById'](_0x5ec9a3(0x241))[_0x5ec9a3(0x220)]();}}}}}}}}),document[_0x3e131a(0x1fa)](_0x3e131a(0x19b))[_0x3e131a(0x1fc)](_0x2919d3=>_0x2919d3[_0x3e131a(0x21a)]('click',()=>showView(_0x2919d3[_0x3e131a(0x203)][_0x3e131a(0x1c5)]))),document['body'][_0x3e131a(0x21a)](_0x3e131a(0x220),_0x365f93=>{const _0x5c3d69=_0x3e131a,_0xb4382a=_0x365f93[_0x5c3d69(0x1bb)][_0x5c3d69(0x26c)](_0x5c3d69(0x22f));if(!_0xb4382a)return;if(_0xb4382a['id']===_0x5c3d69(0x24d))_0x3704c3();else{if(_0xb4382a['id']===_0x5c3d69(0x18f))exportToExcel('sp');else{if(_0xb4382a['id']===_0x5c3d69(0x1f6))exportToPdf('sp');else{if(_0xb4382a['id']===_0x5c3d69(0x1d4))exportToExcel('ct');else{if(_0xb4382a['id']==='ct-btn-pdf')exportToPdf('ct');}}}}});}_0x2b0818();});