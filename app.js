const _0x129e87=_0xfe89;(function(_0x2ef414,_0x5c536b){const _0x4f93c5=_0xfe89,_0x5c79a7=_0x2ef414();while(!![]){try{const _0xd288cf=-parseInt(_0x4f93c5(0x24a))/0x1*(-parseInt(_0x4f93c5(0x1ec))/0x2)+-parseInt(_0x4f93c5(0x2c7))/0x3*(-parseInt(_0x4f93c5(0x214))/0x4)+-parseInt(_0x4f93c5(0x226))/0x5*(parseInt(_0x4f93c5(0x1fc))/0x6)+parseInt(_0x4f93c5(0x28d))/0x7*(-parseInt(_0x4f93c5(0x1e9))/0x8)+-parseInt(_0x4f93c5(0x2a3))/0x9+-parseInt(_0x4f93c5(0x299))/0xa*(-parseInt(_0x4f93c5(0x2d9))/0xb)+parseInt(_0x4f93c5(0x292))/0xc;if(_0xd288cf===_0x5c536b)break;else _0x5c79a7['push'](_0x5c79a7['shift']());}catch(_0x3888ee){_0x5c79a7['push'](_0x5c79a7['shift']());}}}(_0x28d3,0xe9bd2));function _0x28d3(){const _0x1822a3=['onload','data','export-modal','https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/fonts/Roboto/Roboto-Regular.ttf','hide','Sản\x20phẩm\x20mới:\x20','getItem','book_append_sheet','Số\x20Lượng','fullChiTietDataForFilters','width','nhap','button','.app-view.active','Nhập','auto','Roboto-Regular.ttf','confirm-title','263957TJNUBS','createElement','message','xuat','pageSize','w-64','click','contains','muc_dich','parentElement','Không\x20có\x20dữ\x20liệu','sp-btn-excel','Error\x20loading\x20view\x20','fullDonHangDataForFilters','\x22\x20class=\x22form-checkbox\x20h-4\x20w-4\x20text-blue-600\x22\x20','getElementById','postgres_changes','sidebarCollapsed','forEach','Không\x20thể\x20tải\x20file\x20font.','book_new','setFont','ml-20','NFD','value','text','Danh\x20sách\x20đơn\x20hàng\x20vừa\x20được\x20cập\x20nhật.','Bạn\x20có\x20chắc\x20chắn\x20muốn\x20đóng?\x20Mọi\x20thay\x20đổi\x20chưa\x20lưu\x20sẽ\x20bị\x20mất.','Thủ\x20Kho','toast\x20toast-','cancel-dh-btn','setItem','target','30%','Lỗi\x20xuất\x20PDF:','user-gmail','Lỗi\x20xuất\x20Excel:','subscribe','sp-modal-ton-dau','fullSanPhamDataForFilters','active','Data','mr-3','cursor','ma_nx,\x20thoi_gian,\x20loai,\x20ma_sp,\x20ten_sp,\x20so_luong,\x20muc_dich,\x20phu_trach','user-announcement-bar','sp-modal-ten-sp','ho_ten','filter-popover-template','Tồn\x20Đầu','100%','toast-container','\x20đã\x20bị\x20xóa.','ma_sp','view-','trim','sort','checked','save','SUBSCRIBED','className','sidebar','modals.html','all','classList','Admin','login.html','7gdWBvR','blob','clear','childList','view-chi-tiet','36131964VvvkWq','Xuất\x20Excel\x20thất\x20bại.','export-cancel-btn','public','User','filters','keydown','110GJSZWp','loggedInUser','view-don-hang','sp-modal-phu-trach','key','sidebar-footer','textContent','addFont','filter-opt-','ml-64','2451231nWXKnq','Mã\x20SP','select','hidden','getMonth','add','result','Phụ\x20Trách','getDate','show','.admin-only','normalize','onerror','querySelector','phu_trach','Sản\x20phẩm\x20','Tồn\x20Cuối','.announcement-text','Escape','searchTerm','cancel-reset-btn','public-db-changes','addEventListener','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20mục','-next-page','Bảng\x20sản\x20phẩm\x20vừa\x20được\x20cập\x20nhật.','Error\x20loading\x20HTML\x20from\x20','-pagination-info','.nav-text','internal','innerHTML','info','split','don-hang-modal','true','87Pslgmn','INSERT','insertAdjacentHTML','filtered','user','cloneNode','gmail','ma_nx,\x20ma_sp,\x20ten_sp,\x20phu_trach','modal-container','ma_sp,\x20ten_sp,\x20phu_trach','Không\x20tìm\x20thấy\x20state\x20cho\x20view:\x20','error','ton_dau','Mục\x20Đích','toLowerCase','aoa_to_sheet','sidebar-toggle-icon-open','DanhSachSanPham.xlsx','153461iwATze','password-reset-modal','appendChild','sidebar-toggle-icon-close','readAsDataURL','map','Hiển\x20thị\x20toàn\x20bộ\x20','loai','join','.nav-button','isArray','user-ho-ten','writeFile','Lỗi\x20kết\x20nối\x20Realtime,\x20đang\x20thử\x20lại...','remove','addFileToVFS','has','utils','confirm-ok-btn','logout-btn','--\x20','setFontSize','channel','Xuất\x20PDF\x20thành\x20công!','removeChannel','v_san_pham_chi_tiet','dataset','observe','Đã\x20kết\x20nối\x20Realtime\x20thành\x20công!','ct-btn-pdf','https://qnqtkknzqewesxjoudhr.supabase.co','\x22\x20data-value=\x22','thoi_gian','getNumberOfPages','anh_dai_dien_url','toggle','preventDefault','export-filtered-btn','Mã\x20NX','13926872liBHwb','ma_sp,\x20ten_sp,\x20ton_dau,\x20nhap,\x20xuat,\x20ton_cuoi,\x20phu_trach','user-details','2tXhAmB','confirm-modal','.pdf','location','Loại','href','.progress-bar-inner','\x20-\x20','length','eventType','normal','jspdf','success','ct-btn-excel','itemsPerPage','main-content-area','4560594ZArmaT','\x22\x20class=\x22flex\x20items-center\x20space-x-2\x20cursor-pointer\x20p-1\x20rounded\x20hover:bg-gray-100\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22','DELETE','loading-overlay','opacity-0','beforeend','filter','sidebar-avatar','getWidth','ten_sp','Xuất','view-container','onclick','slice','currentPage','Could\x20not\x20load\x20','view-san-pham','from','yeu_cau','main-app','app-loading','parse','type','.html','41696MnPOTr','(Ký,\x20ghi\x20rõ\x20họ\x20tên)','.\x20Bạn\x20chỉ\x20có\x20thể\x20<span\x20class=\x22font-bold\x20text-red-600\x20uppercase\x22>XEM</span>\x20các\x20đơn\x20hàng\x20và\x20sản\x20phẩm\x20của\x20mình.','log','chi_tiet','Xác\x20nhận\x20hành\x20động','confirm-message','phan_quyen','view','confirm-cancel-btn','lastIndexOf','querySelectorAll','progress-bar','Xuất\x20Excel\x20thành\x20công!','Thời\x20Gian','</span>','cancel-sp-btn','includes','5BuOgxI','closest','image-viewer-modal','style','assign','padStart','sanPhamList','CHANNEL_ERROR','Roboto','replace','bold','ton_cuoi','sidebar-toggle-btn','Tên\x20SP','getFullYear','Xác\x20nhận\x20đóng','Dữ\x20liệu\x20bộ\x20lọc\x20không\x20hợp\x20lệ:','Xuất\x20PDF\x20thất\x20bại.\x20Đã\x20có\x20lỗi\x20xảy\x20ra.'];_0x28d3=function(){return _0x1822a3;};return _0x28d3();}import{initSanPhamView,fetchSanPham,buildSanPhamQuery}from'./sanpham.js';import{initDonHangView,fetchDonHang,buildDonHangQuery,openDonHangModal}from'./donhang.js';function _0xfe89(_0xd5262e,_0x41812e){const _0x28d317=_0x28d3();return _0xfe89=function(_0xfe8945,_0x35dd91){_0xfe8945=_0xfe8945-0x1da;let _0x5e05ac=_0x28d317[_0xfe8945];return _0x5e05ac;},_0xfe89(_0xd5262e,_0x41812e);}import{initChiTietView,fetchChiTiet,buildChiTietQuery}from'./chitiet.js';import{initCaiDatView,fetchUsers}from'./caidat.js';const {createClient}=supabase,SUPABASE_URL=_0x129e87(0x1e0),SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFucXRra256cWV3ZXN4am91ZGhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NTE0NzAsImV4cCI6MjA3NzMyNzQ3MH0.3FnZe-lvrI9N2rwZT7Knd5Ab_Rxi5xJ5KeIMMgKD8zQ';export const sb=createClient(SUPABASE_URL,SUPABASE_KEY);export let currentUser=null;export let currentView=null;export const viewStates={'view-san-pham':{'currentPage':0x1,'itemsPerPage':0x32,'filters':{'ma_sp':[],'ten_sp':[],'phu_trach':[],'ton_kho':''},'searchTerm':'','selected':new Set()},'view-don-hang':{'currentPage':0x1,'itemsPerPage':0x32,'filters':{'thoi_gian_from':'','thoi_gian_to':'','ma_nx':[],'loai_don':'','yeu_cau':[]},'searchTerm':'','selected':new Set()},'view-chi-tiet':{'currentPage':0x1,'itemsPerPage':0x32,'filters':{'thoi_gian_from':'','thoi_gian_to':'','ma_nx':[],'loai_don':'','ma_sp':[],'ten_sp':[],'phu_trach':[]},'searchTerm':''}};export const cache={'phuTrachList':[],'sanPhamList':[],'fullSanPhamDataForFilters':[],'fullDonHangDataForFilters':[],'fullChiTietDataForFilters':[],'userList':[]};export let activeFilterPopover=null;let realtimeChannel=null;const initializedViews=new Set();export const PLACEHOLDER_IMAGE_URL='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IiNmMGYwZjAiIHN0cm9rZT0iI2NjY2NjYyIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgcng9IjIiIHJ5PSIyIj48L3JlY3Q+PGNpcmNsZSBjeD0iOC41IiBjeT0iOC41IiByPSIxLjUiPjwvY2lyY2xlPjxwb2x5bGluZSBwb2ludHM9IjIxIDE1IDE2IDEwIDUgMTciPjwvcG9seWxpbmU+PC9zdmc+';export const DEFAULT_AVATAR_URL='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IiNlMGU3ZmYiIHN0cm9rZT0iI2QxZDVlNyIgc3Ryb2tlLXdpZHRoPSIxIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgc3Ryb2tlPSJub25lIj48L2NpcmNsZT48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSI0IiBmaWxsPSIjZmZmIj48L2NpcmNsZT48cGF0aCBkPSJNNCAyMGE4IDggMCAwIDEgMTYgMFoiIGZpbGw9IiNmZmYiPjwvcGF0aD48L3N2Zz4=';export const showLoading=_0x235076=>document[_0x129e87(0x259)](_0x129e87(0x1ff))['classList']['toggle'](_0x129e87(0x2a6),!_0x235076);export const formatDate=_0x105dd2=>{const _0x210d23=_0x129e87;if(!_0x105dd2)return'';const _0x2d49f7=new Date(_0x105dd2),_0x3e75d4=String(_0x2d49f7[_0x210d23(0x2ab)]())[_0x210d23(0x22b)](0x2,'0'),_0xf6ca97=String(_0x2d49f7[_0x210d23(0x2a7)]()+0x1)[_0x210d23(0x22b)](0x2,'0'),_0x4a940f=_0x2d49f7[_0x210d23(0x234)]();return _0x3e75d4+'/'+_0xf6ca97+'/'+_0x4a940f;};export const debounce=(_0x2ca2cc,_0x23f87a)=>{let _0x553c65;return(..._0x379c16)=>{clearTimeout(_0x553c65),_0x553c65=setTimeout(()=>_0x2ca2cc['apply'](this,_0x379c16),_0x23f87a);};};export function sanitizeFileName(_0x7c0df3){const _0x7ca810=_0x129e87,_0x38150a=_0x7c0df3[_0x7ca810(0x21e)]('.');if(_0x38150a===-0x1)return _0x7c0df3[_0x7ca810(0x2ae)](_0x7ca810(0x261))[_0x7ca810(0x22f)](/[\u0300-\u036f]/g,'')[_0x7ca810(0x2d5)]()[_0x7ca810(0x22f)](/\s+/g,'-')[_0x7ca810(0x22f)](/[^a-z0-9-]/g,'');const _0x590359=_0x7c0df3[_0x7ca810(0x209)](0x0,_0x38150a),_0x653cf7=_0x7c0df3['slice'](_0x38150a),_0x148f57=_0x590359[_0x7ca810(0x2ae)](_0x7ca810(0x261))['replace'](/[\u0300-\u036f]/g,'')[_0x7ca810(0x2d5)]()[_0x7ca810(0x22f)](/\s+/g,'-')['replace'](/[^a-z0-9-]/g,'');return _0x148f57+_0x653cf7;}export function showToast(_0x24ba2a,_0x412863='info'){const _0xe6c2ce=_0x129e87,_0x52a7ff=document[_0xe6c2ce(0x259)](_0xe6c2ce(0x27d)),_0x1681e0=document[_0xe6c2ce(0x24b)]('div');_0x1681e0[_0xe6c2ce(0x286)]=_0xe6c2ce(0x267)+_0x412863,_0x1681e0['textContent']=_0x24ba2a,_0x52a7ff[_0xe6c2ce(0x2db)](_0x1681e0),setTimeout(()=>_0x1681e0[_0xe6c2ce(0x28a)][_0xe6c2ce(0x2a8)](_0xe6c2ce(0x2ac)),0x64),setTimeout(()=>{const _0x2cbcc8=_0xe6c2ce;_0x1681e0[_0x2cbcc8(0x28a)][_0x2cbcc8(0x2e7)]('show'),_0x1681e0['classList'][_0x2cbcc8(0x2a8)](_0x2cbcc8(0x23c)),_0x1681e0[_0x2cbcc8(0x2b9)]('transitionend',()=>_0x1681e0['remove']());},0xbb8);}export function showConfirm(_0x5ccd8,_0x232ddf=_0x129e87(0x219)){return new Promise(_0x1f216d=>{const _0x3c983f=_0xfe89,_0x5bac2f=document[_0x3c983f(0x259)](_0x3c983f(0x1ed)),_0x4aaaf5=document[_0x3c983f(0x259)](_0x3c983f(0x249)),_0x49e224=document['getElementById'](_0x3c983f(0x21a)),_0x4174dc=document[_0x3c983f(0x259)](_0x3c983f(0x2eb)),_0x55bed7=document['getElementById'](_0x3c983f(0x21d));_0x4aaaf5['textContent']=_0x232ddf,_0x49e224['textContent']=_0x5ccd8;const _0x25f044=_0x5e94af=>{const _0x120bae=_0x3c983f;_0x5bac2f[_0x120bae(0x28a)][_0x120bae(0x2a8)](_0x120bae(0x2a6)),_0x4174dc['onclick']=null,_0x55bed7[_0x120bae(0x208)]=null,_0x1f216d(_0x5e94af);};_0x4174dc['onclick']=()=>_0x25f044(!![]),_0x55bed7[_0x3c983f(0x208)]=()=>_0x25f044(![]),_0x5bac2f[_0x3c983f(0x28a)][_0x3c983f(0x2e7)](_0x3c983f(0x2a6));});}function getExportChoice(){return new Promise(_0x50c031=>{const _0xb40402=_0xfe89,_0x371adf=document['getElementById']('export-modal'),_0x43ba48=document['getElementById'](_0xb40402(0x1e7)),_0x147525=document[_0xb40402(0x259)]('export-all-btn'),_0x526fc8=document['getElementById'](_0xb40402(0x294)),_0x34d0eb=_0x439d00=>{const _0x2cbd24=_0xb40402;_0x371adf[_0x2cbd24(0x28a)][_0x2cbd24(0x2a8)](_0x2cbd24(0x2a6)),_0x43ba48[_0x2cbd24(0x208)]=null,_0x147525[_0x2cbd24(0x208)]=null,_0x526fc8['onclick']=null,_0x50c031(_0x439d00);};_0x43ba48[_0xb40402(0x208)]=()=>_0x34d0eb('filtered'),_0x147525[_0xb40402(0x208)]=()=>_0x34d0eb('all'),_0x526fc8[_0xb40402(0x208)]=()=>_0x34d0eb(null),_0x371adf[_0xb40402(0x28a)][_0xb40402(0x2e7)](_0xb40402(0x2a6));});}export function closeActiveFilterPopover(){const _0x3924a5=_0x129e87;activeFilterPopover&&(activeFilterPopover[_0x3924a5(0x2e7)](),activeFilterPopover=null);}export function openFilterPopover(_0x489951,_0x2212a3){const _0x22c6ed=_0x129e87;closeActiveFilterPopover();const _0x269a3e=_0x489951[_0x22c6ed(0x1dc)]['filterKey'],_0x3c6d13=viewStates[_0x2212a3];if(!_0x3c6d13){console['error'](_0x22c6ed(0x2d1)+_0x2212a3);return;}let _0x2f924d;if(_0x2212a3===_0x22c6ed(0x20c))_0x2f924d=cache[_0x22c6ed(0x271)];else{if(_0x2212a3==='view-don-hang')_0x2f924d=cache[_0x22c6ed(0x257)];else _0x2f924d=cache[_0x22c6ed(0x241)];}if(!Array[_0x22c6ed(0x2e3)](_0x2f924d)){console[_0x22c6ed(0x2d2)](_0x22c6ed(0x236),_0x2f924d);return;}const _0x2eec5f=new Set(_0x3c6d13[_0x22c6ed(0x297)][_0x269a3e]);let _0x4eda49=[..._0x2f924d];for(const _0x3211d4 in _0x3c6d13[_0x22c6ed(0x297)]){_0x3211d4!==_0x269a3e&&_0x3c6d13[_0x22c6ed(0x297)][_0x3211d4]&&Array[_0x22c6ed(0x2e3)](_0x3c6d13['filters'][_0x3211d4])&&_0x3c6d13[_0x22c6ed(0x297)][_0x3211d4][_0x22c6ed(0x1f4)]>0x0&&(_0x4eda49=_0x4eda49['filter'](_0x33ad8e=>_0x3c6d13[_0x22c6ed(0x297)][_0x3211d4][_0x22c6ed(0x225)](_0x33ad8e[_0x3211d4])));}const _0x4d8825=[...new Set(_0x4eda49[_0x22c6ed(0x2de)](_0x4373eb=>_0x4373eb[_0x269a3e])['filter'](Boolean))][_0x22c6ed(0x282)](),_0x26c5ee=document[_0x22c6ed(0x259)](_0x22c6ed(0x27a));activeFilterPopover=_0x26c5ee[_0x22c6ed(0x2cc)](!![]),activeFilterPopover['id']='',activeFilterPopover['classList']['remove']('hidden');const _0x441309=activeFilterPopover[_0x22c6ed(0x2b0)]('.filter-search-input'),_0x3cf592=activeFilterPopover['querySelector']('.filter-options-list'),_0x59d521=activeFilterPopover[_0x22c6ed(0x2b0)]('.filter-apply-btn');function _0x450053(_0x47326f=''){const _0xfe6eaf=_0x22c6ed;_0x3cf592[_0xfe6eaf(0x2c2)]='',_0x4d8825['filter'](_0x1dc6c4=>_0x1dc6c4['toLowerCase']()[_0xfe6eaf(0x225)](_0x47326f[_0xfe6eaf(0x2d5)]()))[_0xfe6eaf(0x25c)](_0x1e7447=>{const _0x338c90=_0xfe6eaf,_0x562dc3=_0x338c90(0x2a1)+_0x269a3e+'-'+_0x1e7447[_0x338c90(0x22f)](/\s/g,'-'),_0x324f01=_0x2eec5f[_0x338c90(0x2e9)](_0x1e7447);_0x3cf592['insertAdjacentHTML'](_0x338c90(0x201),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22'+_0x562dc3+_0x338c90(0x1fd)+_0x562dc3+_0x338c90(0x1e1)+_0x1e7447+_0x338c90(0x258)+(_0x324f01?_0x338c90(0x283):'')+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-sm\x20text-gray-700\x22>'+_0x1e7447+_0x338c90(0x2ba));});}_0x450053(),_0x489951[_0x22c6ed(0x253)][_0x22c6ed(0x2db)](activeFilterPopover),_0x441309[_0x22c6ed(0x2b9)]('input',()=>_0x450053(_0x441309[_0x22c6ed(0x262)])),_0x59d521[_0x22c6ed(0x2b9)](_0x22c6ed(0x250),()=>{const _0x384a83=_0x22c6ed,_0x420786=Array['from'](_0x3cf592[_0x384a83(0x21f)]('input:checked'))[_0x384a83(0x2de)](_0x57935e=>_0x57935e[_0x384a83(0x1dc)][_0x384a83(0x262)]);_0x3c6d13['filters'][_0x269a3e]=_0x420786;const _0x511b93=_0x489951['textContent'][_0x384a83(0x2c4)]('--')[0x1][_0x384a83(0x281)]()[_0x384a83(0x2c4)]('\x20')[0x0],_0x5614cd=_0x420786[_0x384a83(0x1f4)]>0x0?'('+_0x420786['length']+')':'';_0x489951[_0x384a83(0x2c2)]=_0x384a83(0x2ed)+_0x511b93+'\x20--\x20<span\x20class=\x22ml-1\x20font-bold\x22>'+_0x5614cd+_0x384a83(0x223),closeActiveFilterPopover();if(_0x2212a3===_0x384a83(0x20c))fetchSanPham(0x1);else{if(_0x2212a3==='view-don-hang')fetchDonHang(0x1);else fetchChiTiet(0x1);}});}export function renderPagination(_0x57e3a2,_0x4d0350,_0xe719bd,_0x8deeca){const _0x3ea1a8=_0x129e87,_0x2e0c63=viewStates[_0x3ea1a8(0x280)+_0x57e3a2];if(!_0x2e0c63)return;const _0x135cdd=document[_0x3ea1a8(0x259)](_0x57e3a2+_0x3ea1a8(0x2bf)),_0x88effa=document[_0x3ea1a8(0x259)](_0x57e3a2+'-prev-page'),_0x4f1f0f=document[_0x3ea1a8(0x259)](_0x57e3a2+_0x3ea1a8(0x2bc));if(!_0x135cdd||!_0x88effa||!_0x4f1f0f)return;const _0xfb841=_0x2e0c63[_0x3ea1a8(0x1fa)]===_0x3ea1a8(0x289);if(_0x4d0350>0x0&&!_0xfb841)_0x135cdd[_0x3ea1a8(0x29f)]='Hiển\x20thị\x20'+(_0xe719bd+0x1)+_0x3ea1a8(0x1f3)+(_0x8deeca+0x1)+'\x20trên\x20tổng\x20số\x20'+_0x4d0350+_0x3ea1a8(0x2bb);else _0x4d0350>0x0&&_0xfb841?_0x135cdd[_0x3ea1a8(0x29f)]=_0x3ea1a8(0x2df)+_0x4d0350+'\x20mục':_0x135cdd[_0x3ea1a8(0x29f)]=_0x3ea1a8(0x254);_0x88effa['disabled']=_0x2e0c63[_0x3ea1a8(0x20a)]<=0x1||_0xfb841;const _0x2a578b=_0xfb841?0x1:Math['ceil'](_0x4d0350/parseInt(_0x2e0c63[_0x3ea1a8(0x1fa)]));_0x4f1f0f['disabled']=_0x2e0c63[_0x3ea1a8(0x20a)]>=_0x2a578b||_0xfb841;}async function exportToExcel(_0x164257){const _0x5e173d=_0x129e87,_0x1db896=await getExportChoice();if(!_0x1db896)return;showLoading(!![]);try{const _0x37afc1=_0x1db896===_0x5e173d(0x2ca);let _0x4b49c2,_0x16c9c0,_0x2f808c,_0x158c33,_0x4294ff;_0x164257==='sp'?(_0x4b49c2=buildSanPhamQuery,_0x4294ff=_0x5e173d(0x1ea),_0x16c9c0=[_0x5e173d(0x2a4),'Tên\x20SP',_0x5e173d(0x27b),_0x5e173d(0x246),_0x5e173d(0x206),_0x5e173d(0x2b3),_0x5e173d(0x2aa)],_0x2f808c=[_0x5e173d(0x27f),'ten_sp','ton_dau','nhap','xuat',_0x5e173d(0x231),_0x5e173d(0x2b1)],_0x158c33=_0x5e173d(0x2d8)):(_0x4b49c2=buildChiTietQuery,_0x4294ff=_0x5e173d(0x276),_0x16c9c0=[_0x5e173d(0x1e8),'Thời\x20Gian',_0x5e173d(0x1f0),_0x5e173d(0x2a4),_0x5e173d(0x233),_0x5e173d(0x240),_0x5e173d(0x2d4),'Phụ\x20Trách'],_0x2f808c=['ma_nx',_0x5e173d(0x1e2),_0x5e173d(0x2e0),_0x5e173d(0x27f),'ten_sp','so_luong',_0x5e173d(0x252),_0x5e173d(0x2b1)],_0x158c33='ChiTietNhapXuat.xlsx');let _0x552b10=_0x37afc1?_0x4b49c2(_0x4294ff):sb[_0x5e173d(0x20d)](_0x164257==='sp'?_0x5e173d(0x1db):_0x5e173d(0x218))[_0x5e173d(0x2a5)](_0x4294ff);currentUser&&currentUser[_0x5e173d(0x21b)]==='User'&&!_0x37afc1&&(_0x552b10=_0x552b10['eq'](_0x5e173d(0x2b1),currentUser['ho_ten']));const {data:_0x39d221,error:_0x584cd2}=await _0x552b10['order'](_0x164257==='sp'?_0x5e173d(0x27f):_0x5e173d(0x1e2),{'ascending':_0x164257==='sp'});if(_0x584cd2)throw _0x584cd2;const _0x37276a=_0x39d221['map'](_0x4baf50=>{const _0x56f077=_0x5e173d;return _0x2f808c[_0x56f077(0x2de)](_0x8b0b85=>{if(_0x8b0b85==='thoi_gian')return formatDate(_0x4baf50[_0x8b0b85]);return _0x4baf50[_0x8b0b85]!==null&&_0x4baf50[_0x8b0b85]!==undefined?_0x4baf50[_0x8b0b85]:'';});}),_0x58d0c8=XLSX[_0x5e173d(0x2ea)][_0x5e173d(0x2d6)]([_0x16c9c0,..._0x37276a]),_0x469386=XLSX[_0x5e173d(0x2ea)][_0x5e173d(0x25e)]();XLSX['utils'][_0x5e173d(0x23f)](_0x469386,_0x58d0c8,_0x5e173d(0x273)),XLSX[_0x5e173d(0x2e5)](_0x469386,_0x158c33),showToast(_0x5e173d(0x221),'success');}catch(_0x29c45f){console[_0x5e173d(0x2d2)](_0x5e173d(0x26e),_0x29c45f),showToast(_0x5e173d(0x293),'error');}finally{showLoading(![]);}}async function exportToPdf(_0x37dba0){const _0x2c36dd=_0x129e87,_0x17cbc0=await getExportChoice();if(!_0x17cbc0)return;showLoading(!![]);try{const {jsPDF:_0x2a5afb}=window[_0x2c36dd(0x1f7)],_0x4a9f01=new _0x2a5afb({'orientation':'landscape'}),_0x259ca6=_0x2c36dd(0x23b),_0x9f7318=await fetch(_0x259ca6);if(!_0x9f7318['ok'])throw new Error(_0x2c36dd(0x25d));const _0x28ade9=await _0x9f7318[_0x2c36dd(0x28e)](),_0x2642a9=await new Promise((_0x129ba,_0x20ba68)=>{const _0x1ebaff=_0x2c36dd,_0x3fa4c2=new FileReader();_0x3fa4c2[_0x1ebaff(0x2dd)](_0x28ade9),_0x3fa4c2[_0x1ebaff(0x238)]=()=>_0x129ba(_0x3fa4c2[_0x1ebaff(0x2a9)][_0x1ebaff(0x2c4)](',')[0x1]),_0x3fa4c2[_0x1ebaff(0x2af)]=_0xb15e26=>_0x20ba68(_0xb15e26);});_0x4a9f01[_0x2c36dd(0x2e8)]('Roboto-Regular.ttf',_0x2642a9),_0x4a9f01[_0x2c36dd(0x2a0)](_0x2c36dd(0x248),'Roboto',_0x2c36dd(0x1f6)),_0x4a9f01[_0x2c36dd(0x25f)]('Roboto');const _0x2082da=_0x17cbc0===_0x2c36dd(0x2ca);let _0x1102c2,_0x2dc1a7,_0xc24c00,_0x2da1fb,_0x4b3e16,_0x144de;_0x37dba0==='sp'?(_0x1102c2=buildSanPhamQuery,_0x2dc1a7=_0x2c36dd(0x1ea),_0xc24c00=[[_0x2c36dd(0x2a4),_0x2c36dd(0x233),'Tồn\x20Đầu',_0x2c36dd(0x246),'Xuất','Tồn\x20Cuối',_0x2c36dd(0x2aa)]],_0x2da1fb=[_0x2c36dd(0x27f),_0x2c36dd(0x205),_0x2c36dd(0x2d3),_0x2c36dd(0x243),_0x2c36dd(0x24d),_0x2c36dd(0x231),_0x2c36dd(0x2b1)],_0x4b3e16='Báo\x20Cáo\x20Tồn\x20Kho\x20Sản\x20Phẩm',_0x144de={0x0:{'cellWidth':0x23},0x1:{'cellWidth':0x41},0x2:{'cellWidth':0x19},0x3:{'cellWidth':0x19},0x4:{'cellWidth':0x19},0x5:{'cellWidth':0x19},0x6:{'cellWidth':_0x2c36dd(0x247)}}):(_0x1102c2=buildChiTietQuery,_0x2dc1a7=_0x2c36dd(0x276),_0xc24c00=[[_0x2c36dd(0x1e8),_0x2c36dd(0x222),'Loại',_0x2c36dd(0x2a4),_0x2c36dd(0x233),'SL',_0x2c36dd(0x2d4),_0x2c36dd(0x2aa)]],_0x2da1fb=['ma_nx','thoi_gian',_0x2c36dd(0x2e0),_0x2c36dd(0x27f),_0x2c36dd(0x205),'so_luong',_0x2c36dd(0x252),_0x2c36dd(0x2b1)],_0x4b3e16='Báo\x20Cáo\x20Chi\x20Tiết\x20Nhập\x20Xuất',_0x144de={0x0:{'cellWidth':0x19},0x1:{'cellWidth':0x19},0x2:{'cellWidth':0xf},0x3:{'cellWidth':0x1e},0x4:{'cellWidth':0x2d},0x5:{'cellWidth':0xf},0x6:{'cellWidth':0x46},0x7:{'cellWidth':'auto'}});let _0x1b76ec=_0x2082da?_0x1102c2(_0x2dc1a7):sb['from'](_0x37dba0==='sp'?_0x2c36dd(0x1db):_0x2c36dd(0x218))[_0x2c36dd(0x2a5)](_0x2dc1a7);currentUser&&currentUser[_0x2c36dd(0x21b)]===_0x2c36dd(0x296)&&!_0x2082da&&(_0x1b76ec=_0x1b76ec['eq'](_0x2c36dd(0x2b1),currentUser[_0x2c36dd(0x279)]));const {data:_0x2f2cde,error:_0x262df9}=await _0x1b76ec['order'](_0x37dba0==='sp'?_0x2c36dd(0x27f):_0x2c36dd(0x1e2),{'ascending':_0x37dba0==='sp'});if(_0x262df9)throw _0x262df9;const _0x2fa095=_0x2f2cde[_0x2c36dd(0x2de)](_0x3d5562=>_0x2da1fb[_0x2c36dd(0x2de)](_0x5625db=>{const _0x2ee1d7=_0x2c36dd;if(_0x5625db===_0x2ee1d7(0x1e2))return formatDate(_0x3d5562[_0x5625db]);return _0x3d5562[_0x5625db]!==null&&_0x3d5562[_0x5625db]!==undefined?String(_0x3d5562[_0x5625db]):'';}));_0x4a9f01[_0x2c36dd(0x25f)](_0x2c36dd(0x22e),_0x2c36dd(0x1f6)),_0x4a9f01[_0x2c36dd(0x2ee)](0x12),_0x4a9f01[_0x2c36dd(0x263)](_0x4b3e16,0xe,0x10),_0x4a9f01['autoTable']({'head':_0xc24c00,'body':_0x2fa095,'startY':0x16,'styles':{'font':_0x2c36dd(0x22e),'fontStyle':_0x2c36dd(0x1f6),'fontSize':0x7},'headStyles':{'fillColor':[0x22,0x77,0xaa],'textColor':0xff,'fontStyle':_0x2c36dd(0x230)},'columnStyles':_0x144de,'didDrawPage':function(_0x5d9a39){const _0x56b2b5=_0x2c36dd;if(_0x5d9a39['pageNumber']===_0x4a9f01[_0x56b2b5(0x2c1)][_0x56b2b5(0x1e3)]()){const _0x420f45=_0x4a9f01[_0x56b2b5(0x2c1)][_0x56b2b5(0x24e)]['getHeight'](),_0x57fef5=_0x4a9f01[_0x56b2b5(0x2c1)][_0x56b2b5(0x24e)][_0x56b2b5(0x204)]();let _0x3d0529=_0x5d9a39[_0x56b2b5(0x275)]['y']+0xf;if(_0x3d0529>_0x420f45-0x14)_0x3d0529=_0x420f45-0x14;_0x4a9f01[_0x56b2b5(0x2ee)](0xb),_0x4a9f01['setFont'](_0x56b2b5(0x22e),_0x56b2b5(0x1f6)),_0x4a9f01['text']('Người\x20Phụ\x20Trách',0x28,_0x3d0529),_0x4a9f01['text'](_0x56b2b5(0x215),0x28,_0x3d0529+0x7),_0x4a9f01[_0x56b2b5(0x263)](_0x56b2b5(0x266),_0x57fef5-0x50,_0x3d0529),_0x4a9f01[_0x56b2b5(0x263)](_0x56b2b5(0x215),_0x57fef5-0x50,_0x3d0529+0x7);}}}),_0x4a9f01[_0x2c36dd(0x284)](_0x4b3e16['replace'](/\s/g,'_')+_0x2c36dd(0x1ee)),showToast(_0x2c36dd(0x2f0),_0x2c36dd(0x1f8));}catch(_0x2a071f){console[_0x2c36dd(0x2d2)](_0x2c36dd(0x26c),_0x2a071f),showToast(_0x2c36dd(0x237),'error');}finally{showLoading(![]);}}async function showView(_0x19962b){const _0x4df8c1=_0x129e87;if(currentView===_0x19962b)return;const _0x227375=document[_0x4df8c1(0x259)](_0x4df8c1(0x220)),_0x1359d7=_0x227375['querySelector'](_0x4df8c1(0x1f2));_0x227375[_0x4df8c1(0x28a)]['remove'](_0x4df8c1(0x2a6)),_0x1359d7['style'][_0x4df8c1(0x242)]='0%';try{setTimeout(()=>{const _0x33c572=_0x4df8c1;_0x1359d7['style'][_0x33c572(0x242)]=_0x33c572(0x26b);},0x0);const _0x427076=document[_0x4df8c1(0x2b0)](_0x4df8c1(0x245));document[_0x4df8c1(0x21f)]('.nav-button')[_0x4df8c1(0x25c)](_0x534281=>{const _0xf8bfa5=_0x4df8c1;_0x534281['classList'][_0xf8bfa5(0x1e5)](_0xf8bfa5(0x272),_0x534281['dataset']['view']===_0x19962b);});const _0x35784f=document[_0x4df8c1(0x259)](_0x4df8c1(0x207)),_0x3c2d31=_0x19962b[_0x4df8c1(0x22f)]('view-',''),_0x443c0c=_0x3c2d31+_0x4df8c1(0x213);let _0x352c88=document['getElementById'](_0x19962b);if(!_0x352c88){const _0x54328d=await fetch(_0x443c0c);if(!_0x54328d['ok'])throw new Error(_0x4df8c1(0x20b)+_0x443c0c);const _0x1e075e=await _0x54328d['text']();_0x35784f[_0x4df8c1(0x2c9)](_0x4df8c1(0x201),_0x1e075e),_0x352c88=document[_0x4df8c1(0x259)](_0x19962b);}_0x1359d7[_0x4df8c1(0x229)][_0x4df8c1(0x242)]='70%';if(!initializedViews[_0x4df8c1(0x2e9)](_0x19962b)){switch(_0x19962b){case _0x4df8c1(0x20c):initSanPhamView();break;case _0x4df8c1(0x29b):initDonHangView();break;case _0x4df8c1(0x291):initChiTietView();break;case'view-cai-dat':initCaiDatView();break;}initializedViews[_0x4df8c1(0x2a8)](_0x19962b);}currentView=_0x19962b,await loadDataForCurrentView(![]),_0x427076&&_0x427076['classList'][_0x4df8c1(0x2e7)](_0x4df8c1(0x272)),_0x352c88[_0x4df8c1(0x28a)][_0x4df8c1(0x2a8)]('active'),_0x1359d7['style'][_0x4df8c1(0x242)]=_0x4df8c1(0x27c),setTimeout(()=>{const _0x5477ba=_0x4df8c1;_0x227375[_0x5477ba(0x28a)][_0x5477ba(0x2a8)]('hidden'),_0x1359d7[_0x5477ba(0x229)][_0x5477ba(0x242)]='0%';},0x1f4);}catch(_0x2f6d8d){console[_0x4df8c1(0x2d2)](_0x4df8c1(0x256)+_0x19962b+':',_0x2f6d8d),showToast('Could\x20not\x20load\x20view:\x20'+_0x19962b,_0x4df8c1(0x2d2)),_0x227375[_0x4df8c1(0x28a)]['add'](_0x4df8c1(0x2a6));}}export function navigateToSanPham(_0x235a41){const _0x3abd11=_0x129e87,_0x48665a=viewStates[_0x3abd11(0x20c)];_0x48665a[_0x3abd11(0x2b6)]='',_0x48665a[_0x3abd11(0x297)]={'ma_sp':[],'ten_sp':[],'phu_trach':[],'ton_kho':''},Object[_0x3abd11(0x22a)](_0x48665a['filters'],_0x235a41),showView(_0x3abd11(0x20c));}async function loadDataForCurrentView(_0x1eda7c=!![]){const _0x4a3057=_0x129e87;switch(currentView){case _0x4a3057(0x20c):await fetchSanPham(0x1,_0x1eda7c);break;case _0x4a3057(0x29b):await fetchDonHang(0x1,_0x1eda7c);break;case _0x4a3057(0x291):await fetchChiTiet(0x1,_0x1eda7c);break;case'view-cai-dat':await fetchUsers(_0x1eda7c);break;}}export function updateSidebarAvatar(_0x4f3534){const _0x1179ad=_0x129e87,_0x4503d4=document[_0x1179ad(0x259)](_0x1179ad(0x203));_0x4503d4&&(_0x4503d4['src']=_0x4f3534||DEFAULT_AVATAR_URL);}document[_0x129e87(0x2b9)]('DOMContentLoaded',async()=>{const _0x2a6918=_0x129e87,_0x4e294a=document[_0x2a6918(0x259)](_0x2a6918(0x287)),_0x420058=document[_0x2a6918(0x259)](_0x2a6918(0x1fb)),_0x400766=document['getElementById'](_0x2a6918(0x232)),_0x407cab=document[_0x2a6918(0x259)](_0x2a6918(0x2d7)),_0x579451=document['getElementById'](_0x2a6918(0x2dc)),_0x50034b=document[_0x2a6918(0x21f)](_0x2a6918(0x2c0)),_0x48eb61=document[_0x2a6918(0x259)](_0x2a6918(0x1eb)),_0x2343eb=document[_0x2a6918(0x259)](_0x2a6918(0x29e)),_0x27e8e2=document[_0x2a6918(0x259)](_0x2a6918(0x203)),_0x52cbbf=_0x1778ca=>{const _0x1b658e=_0x2a6918;_0x1778ca?(_0x4e294a[_0x1b658e(0x28a)][_0x1b658e(0x2e7)]('w-64'),_0x4e294a['classList'][_0x1b658e(0x2a8)]('w-20'),_0x420058[_0x1b658e(0x28a)][_0x1b658e(0x2e7)](_0x1b658e(0x2a2)),_0x420058[_0x1b658e(0x28a)]['add']('ml-20'),_0x407cab['classList']['remove']('hidden'),_0x579451[_0x1b658e(0x28a)][_0x1b658e(0x2a8)]('hidden'),_0x50034b[_0x1b658e(0x25c)](_0x1cc4ed=>_0x1cc4ed[_0x1b658e(0x28a)][_0x1b658e(0x2a8)]('opacity-0',_0x1b658e(0x2a6))),_0x48eb61['classList'][_0x1b658e(0x2a8)](_0x1b658e(0x200),'hidden'),_0x2343eb['classList'][_0x1b658e(0x2a8)](_0x1b658e(0x200),_0x1b658e(0x2a6)),_0x27e8e2[_0x1b658e(0x28a)][_0x1b658e(0x2e7)](_0x1b658e(0x274))):(_0x4e294a[_0x1b658e(0x28a)][_0x1b658e(0x2a8)](_0x1b658e(0x24f)),_0x4e294a[_0x1b658e(0x28a)][_0x1b658e(0x2e7)]('w-20'),_0x420058[_0x1b658e(0x28a)]['add'](_0x1b658e(0x2a2)),_0x420058[_0x1b658e(0x28a)][_0x1b658e(0x2e7)](_0x1b658e(0x260)),_0x407cab[_0x1b658e(0x28a)]['add'](_0x1b658e(0x2a6)),_0x579451['classList']['remove'](_0x1b658e(0x2a6)),_0x50034b[_0x1b658e(0x25c)](_0x29917c=>_0x29917c[_0x1b658e(0x28a)][_0x1b658e(0x2e7)]('opacity-0',_0x1b658e(0x2a6))),_0x48eb61[_0x1b658e(0x28a)][_0x1b658e(0x2e7)](_0x1b658e(0x200),'hidden'),_0x2343eb[_0x1b658e(0x28a)][_0x1b658e(0x2e7)](_0x1b658e(0x200),_0x1b658e(0x2a6)),_0x27e8e2[_0x1b658e(0x28a)][_0x1b658e(0x2a8)]('mr-3'));};_0x400766[_0x2a6918(0x2b9)]('click',()=>{const _0x3a4990=_0x2a6918,_0x14cb16=_0x4e294a[_0x3a4990(0x28a)][_0x3a4990(0x251)]('w-20');_0x52cbbf(!_0x14cb16),localStorage[_0x3a4990(0x269)](_0x3a4990(0x25b),!_0x14cb16);});localStorage[_0x2a6918(0x23e)]('sidebarCollapsed')===_0x2a6918(0x2c6)&&_0x52cbbf(!![]);async function _0x10a718(_0x54528a,_0x36d0d2){const _0xa96d6b=_0x2a6918;try{const _0x4b7738=await fetch(_0x54528a);if(!_0x4b7738['ok'])throw new Error(_0xa96d6b(0x20b)+_0x54528a);const _0x157c7f=await _0x4b7738['text']();document[_0xa96d6b(0x259)](_0x36d0d2)[_0xa96d6b(0x2c2)]=_0x157c7f;}catch(_0x40cdb3){console[_0xa96d6b(0x2d2)](_0xa96d6b(0x2be)+_0x54528a+':',_0x40cdb3);}}async function _0x4cc625(){const _0x5e2dd6=_0x2a6918;try{await _0x10a718(_0x5e2dd6(0x288),_0x5e2dd6(0x2cf));const _0x392f25=sessionStorage[_0x5e2dd6(0x23e)](_0x5e2dd6(0x29a));_0x392f25?await _0x24c346(JSON[_0x5e2dd6(0x211)](_0x392f25)):window['location'][_0x5e2dd6(0x1f1)]=_0x5e2dd6(0x28c);}catch(_0x3b23d7){console['error']('Lỗi\x20session:',_0x3b23d7),sessionStorage[_0x5e2dd6(0x28f)](),window[_0x5e2dd6(0x1ef)][_0x5e2dd6(0x1f1)]=_0x5e2dd6(0x28c);}}async function _0x24c346(_0x887b59){const _0x28571e=_0x2a6918;currentUser=_0x887b59,document[_0x28571e(0x259)](_0x28571e(0x2e4))[_0x28571e(0x29f)]=_0x887b59[_0x28571e(0x279)]||_0x28571e(0x296),document[_0x28571e(0x259)](_0x28571e(0x26d))[_0x28571e(0x29f)]=_0x887b59[_0x28571e(0x2cd)],updateSidebarAvatar(_0x887b59[_0x28571e(0x1e4)]);const _0x16963f=document[_0x28571e(0x259)](_0x28571e(0x277));if(_0x887b59[_0x28571e(0x21b)]===_0x28571e(0x296)){const _0x14c12a=_0x16963f['querySelector'](_0x28571e(0x2b4));_0x14c12a[_0x28571e(0x2c2)]='Xin\x20Chào\x20:\x20'+_0x887b59[_0x28571e(0x279)]+_0x28571e(0x1f3)+_0x887b59['phan_quyen']+_0x28571e(0x216),_0x16963f['classList']['remove'](_0x28571e(0x2a6));}else _0x16963f[_0x28571e(0x28a)][_0x28571e(0x2a8)](_0x28571e(0x2a6));_0x57547b(_0x887b59),await _0x30d5d9(),_0x49636c(),document[_0x28571e(0x259)](_0x28571e(0x210))[_0x28571e(0x28a)][_0x28571e(0x2a8)](_0x28571e(0x2a6)),document[_0x28571e(0x259)](_0x28571e(0x20f))['classList']['remove'](_0x28571e(0x2a6)),_0x1d727d(),await showView(_0x28571e(0x20c));}async function _0x30d5d9(){const _0x17580d=_0x2a6918;showLoading(!![]);try{let _0x3875de=sb[_0x17580d(0x20d)](_0x17580d(0x1db))[_0x17580d(0x2a5)](_0x17580d(0x2d0)),_0xbdbde0=sb[_0x17580d(0x20d)]('don_hang')[_0x17580d(0x2a5)]('ma_nx,\x20yeu_cau'),_0x546071=sb[_0x17580d(0x20d)](_0x17580d(0x218))[_0x17580d(0x2a5)](_0x17580d(0x2ce));currentUser&&currentUser[_0x17580d(0x21b)]===_0x17580d(0x296)&&(_0x3875de=_0x3875de['eq']('phu_trach',currentUser['ho_ten']),_0xbdbde0=_0xbdbde0['eq'](_0x17580d(0x20e),currentUser[_0x17580d(0x279)]),_0x546071=_0x546071['eq'](_0x17580d(0x2b1),currentUser['ho_ten']));const _0x488469=sb[_0x17580d(0x20d)]('v_san_pham_chi_tiet')[_0x17580d(0x2a5)](_0x17580d(0x2b1)),_0x3d8df8=sb['from']('v_san_pham_chi_tiet')[_0x17580d(0x2a5)]('ma_sp,\x20ten_sp,\x20ton_cuoi,\x20phu_trach'),_0xe2e821=sb[_0x17580d(0x20d)](_0x17580d(0x2cb))[_0x17580d(0x2a5)]('ho_ten'),[_0x4f981a,_0x29f142,_0x95b2ea,_0x395ae9,_0x5a42a4,_0xcf343f]=await Promise[_0x17580d(0x289)]([_0x488469,_0x3d8df8,_0xe2e821,_0x3875de,_0xbdbde0,_0x546071]),_0x124d63=[_0x4f981a[_0x17580d(0x2d2)],_0x29f142[_0x17580d(0x2d2)],_0x95b2ea['error'],_0x395ae9[_0x17580d(0x2d2)],_0x5a42a4[_0x17580d(0x2d2)],_0xcf343f['error']]['filter'](Boolean);if(_0x124d63[_0x17580d(0x1f4)]>0x0)throw new Error('Lỗi\x20khi\x20tải\x20dữ\x20liệu\x20ban\x20đầu:\x20'+_0x124d63[_0x17580d(0x2de)](_0x473803=>_0x473803[_0x17580d(0x24c)])[_0x17580d(0x2e1)](',\x20'));const _0x28abf9=[...new Set((_0x4f981a[_0x17580d(0x239)]||[])['map'](_0x2466da=>_0x2466da['phu_trach'])[_0x17580d(0x202)](Boolean))],_0x59d4a9=[...new Set((_0x95b2ea[_0x17580d(0x239)]||[])[_0x17580d(0x2de)](_0x3df0d8=>_0x3df0d8[_0x17580d(0x279)])[_0x17580d(0x202)](Boolean))];cache['phuTrachList']=[...new Set([..._0x28abf9,..._0x59d4a9])]['sort'](),cache[_0x17580d(0x22c)]=_0x29f142[_0x17580d(0x239)]||[],cache['fullSanPhamDataForFilters']=_0x395ae9['data']||[],cache[_0x17580d(0x257)]=_0x5a42a4[_0x17580d(0x239)]||[],cache[_0x17580d(0x241)]=_0xcf343f[_0x17580d(0x239)]||[];}catch(_0x39d04b){console[_0x17580d(0x2d2)](_0x39d04b),showToast('Không\x20thể\x20tải\x20dữ\x20liệu\x20cần\x20thiết\x20cho\x20ứng\x20dụng.','error');}finally{showLoading(![]);}}function _0x49636c(){const _0x249cc4=_0x2a6918;if(realtimeChannel)sb[_0x249cc4(0x1da)](realtimeChannel);const _0x58f838=async _0x2a34e1=>{const _0x42def7=_0x249cc4;console[_0x42def7(0x217)]('Realtime\x20update\x20received:',_0x2a34e1),showToast(_0x2a34e1,_0x42def7(0x2c3)),await _0x30d5d9(),await loadDataForCurrentView();};realtimeChannel=sb[_0x249cc4(0x2ef)](_0x249cc4(0x2b8))['on'](_0x249cc4(0x25a),{'event':'*','schema':_0x249cc4(0x295),'table':'san_pham'},_0x5759be=>{const _0x5ba631=_0x249cc4;let _0x34492f=_0x5ba631(0x2bd);if(_0x5759be[_0x5ba631(0x1f5)]===_0x5ba631(0x2c8))_0x34492f=_0x5ba631(0x23d)+_0x5759be['new'][_0x5ba631(0x27f)];if(_0x5759be[_0x5ba631(0x1f5)]===_0x5ba631(0x1fe))_0x34492f=_0x5ba631(0x2b2)+_0x5759be['old'][_0x5ba631(0x27f)]+_0x5ba631(0x27e);_0x58f838(_0x34492f);})['on']('postgres_changes',{'event':'*','schema':_0x249cc4(0x295),'table':'don_hang'},()=>_0x58f838(_0x249cc4(0x264)))['on'](_0x249cc4(0x25a),{'event':'*','schema':_0x249cc4(0x295),'table':'chi_tiet'},()=>_0x58f838('Dữ\x20liệu\x20kho\x20vừa\x20được\x20cập\x20nhật.'))[_0x249cc4(0x26f)](_0x438a67=>{const _0x54b108=_0x249cc4;if(_0x438a67===_0x54b108(0x285))console['log'](_0x54b108(0x1de));if(_0x438a67===_0x54b108(0x22d))console[_0x54b108(0x2d2)](_0x54b108(0x2e6));});}function _0x57547b(_0x265301){const _0x17763c=_0x2a6918,_0x151537=_0x265301[_0x17763c(0x21b)]===_0x17763c(0x28b),_0x2ff27a=new MutationObserver((_0x5283e6,_0x45c4f0)=>{const _0x598a3b=_0x17763c;for(const _0x48ae46 of _0x5283e6){_0x48ae46[_0x598a3b(0x212)]===_0x598a3b(0x290)&&document[_0x598a3b(0x21f)](_0x598a3b(0x2ad))['forEach'](_0xe294ee=>{const _0x4984ea=_0x598a3b;_0xe294ee[_0x4984ea(0x28a)]['toggle'](_0x4984ea(0x2a6),!_0x151537);});}});_0x2ff27a[_0x17763c(0x1dd)](document[_0x17763c(0x259)](_0x17763c(0x207)),{'childList':!![],'subtree':!![]});}function _0x4798c2(){const _0x405af5=_0x2a6918;if(realtimeChannel)sb[_0x405af5(0x1da)](realtimeChannel);sessionStorage[_0x405af5(0x28f)](),window[_0x405af5(0x1ef)][_0x405af5(0x1f1)]=_0x405af5(0x28c);}function _0x1d727d(){const _0x2a22bf=_0x2a6918;document['addEventListener'](_0x2a22bf(0x298),async _0x124bf8=>{const _0x3cefd7=_0x2a22bf;if(_0x124bf8[_0x3cefd7(0x29d)]!==_0x3cefd7(0x2b5))return;if(activeFilterPopover){closeActiveFilterPopover(),_0x124bf8[_0x3cefd7(0x1e6)]();return;}const _0x361cef=document[_0x3cefd7(0x259)](_0x3cefd7(0x228));if(_0x361cef&&!_0x361cef[_0x3cefd7(0x28a)][_0x3cefd7(0x251)](_0x3cefd7(0x2a6))){_0x361cef[_0x3cefd7(0x28a)]['add'](_0x3cefd7(0x2a6)),_0x124bf8['preventDefault']();return;}const _0x54b530=document['getElementById'](_0x3cefd7(0x1ed));if(_0x54b530&&!_0x54b530[_0x3cefd7(0x28a)][_0x3cefd7(0x251)](_0x3cefd7(0x2a6))){document['getElementById'](_0x3cefd7(0x21d))?.[_0x3cefd7(0x250)](),_0x124bf8[_0x3cefd7(0x1e6)]();return;}const _0x345344=document['getElementById'](_0x3cefd7(0x23a));if(_0x345344&&!_0x345344[_0x3cefd7(0x28a)][_0x3cefd7(0x251)](_0x3cefd7(0x2a6))){document[_0x3cefd7(0x259)](_0x3cefd7(0x294))?.[_0x3cefd7(0x250)](),_0x124bf8[_0x3cefd7(0x1e6)]();return;}const _0x32a3ee=document['getElementById'](_0x3cefd7(0x2c5));if(_0x32a3ee&&!_0x32a3ee[_0x3cefd7(0x28a)][_0x3cefd7(0x251)]('hidden')){const _0x9cf540=document[_0x3cefd7(0x259)]('save-dh-btn'),_0x3d1f00=document[_0x3cefd7(0x259)](_0x3cefd7(0x268));if(!_0x9cf540||!_0x3d1f00)return;const _0x413623=_0x9cf540[_0x3cefd7(0x28a)][_0x3cefd7(0x251)](_0x3cefd7(0x2a6));_0x124bf8[_0x3cefd7(0x1e6)]();if(_0x413623)_0x3d1f00['click']();else{const _0x153d19=await showConfirm(_0x3cefd7(0x265),_0x3cefd7(0x235));_0x153d19&&_0x3d1f00['click']();}return;}const _0x35fe7d=document['getElementById']('san-pham-modal');if(_0x35fe7d&&!_0x35fe7d[_0x3cefd7(0x28a)]['contains'](_0x3cefd7(0x2a6))){const _0x497d3d=document['getElementById'](_0x3cefd7(0x224));if(!_0x497d3d)return;const _0x1ce916=!!document[_0x3cefd7(0x259)]('sp-edit-mode-ma-sp')?.[_0x3cefd7(0x262)],_0x1401b3=document['getElementById'](_0x3cefd7(0x270)),_0x3baadb=document[_0x3cefd7(0x259)]('sp-modal-ma-sp')?.[_0x3cefd7(0x262)]||document['getElementById'](_0x3cefd7(0x278))?.[_0x3cefd7(0x262)]||_0x1401b3&&_0x1401b3['value']!=='0'||document[_0x3cefd7(0x259)](_0x3cefd7(0x29c))?.[_0x3cefd7(0x262)];_0x124bf8['preventDefault']();if(_0x1ce916||_0x3baadb){const _0x26befc=await showConfirm(_0x3cefd7(0x265),_0x3cefd7(0x235));_0x26befc&&_0x497d3d[_0x3cefd7(0x250)]();}else _0x497d3d[_0x3cefd7(0x250)]();return;}const _0x5574c8=document[_0x3cefd7(0x259)](_0x3cefd7(0x2da));if(_0x5574c8&&!_0x5574c8[_0x3cefd7(0x28a)][_0x3cefd7(0x251)](_0x3cefd7(0x2a6))){document[_0x3cefd7(0x259)](_0x3cefd7(0x2b7))?.[_0x3cefd7(0x250)](),_0x124bf8[_0x3cefd7(0x1e6)]();return;}}),document['querySelectorAll'](_0x2a22bf(0x2e2))[_0x2a22bf(0x25c)](_0x56ce29=>_0x56ce29[_0x2a22bf(0x2b9)](_0x2a22bf(0x250),()=>showView(_0x56ce29[_0x2a22bf(0x1dc)][_0x2a22bf(0x21c)]))),document['body'][_0x2a22bf(0x2b9)](_0x2a22bf(0x250),_0x232fbe=>{const _0x437bc9=_0x2a22bf,_0x1ab9ce=_0x232fbe[_0x437bc9(0x26a)][_0x437bc9(0x227)](_0x437bc9(0x244));if(!_0x1ab9ce)return;if(_0x1ab9ce['id']===_0x437bc9(0x2ec))_0x4798c2();else{if(_0x1ab9ce['id']===_0x437bc9(0x255))exportToExcel('sp');else{if(_0x1ab9ce['id']==='sp-btn-pdf')exportToPdf('sp');else{if(_0x1ab9ce['id']===_0x437bc9(0x1f9))exportToExcel('ct');else{if(_0x1ab9ce['id']===_0x437bc9(0x1df))exportToPdf('ct');}}}}});}_0x4cc625();});